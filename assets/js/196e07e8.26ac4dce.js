"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5084],{3905:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>m});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),d=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},u=function(e){var t=d(e.components);return n.createElement(s.Provider,{value:t},e.children)},c="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),c=d(a),h=r,m=c["".concat(s,".").concat(h)]||c[h]||p[h]||i;return a?n.createElement(m,l(l({ref:t},u),{},{components:a})):n.createElement(m,l({ref:t},u))}));function m(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,l=new Array(i);l[0]=h;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o[c]="string"==typeof e?e:r,l[1]=o;for(var d=2;d<i;d++)l[d]=a[d];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}h.displayName="MDXCreateElement"},6135:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>u,contentTitle:()=>s,default:()=>m,frontMatter:()=>o,metadata:()=>d,toc:()=>c});var n=a(87462),r=a(63366),i=(a(67294),a(3905)),l=["components"],o={id:"interlay-dashboards",title:"Interlay Dashboards",sidebar_label:"Interlay",description:"Interlay is a decentralized finance hub on Polkadot. It started as a native Bitcoin bridge, allowing users to mint and redeem iBTC on the Polkadot network. iBTC is a trustless, decentralized, and interoperable token redeemable one-for-one with native Bitcoin.",keywords:["polkadot","dashboard","dune","interlay","DeFi"],slug:"../interlay-dashboards"},s="Interlay Dashboards",d={unversionedId:"general/dune-analytics/parachain-dashboards/interlay-dashboards",id:"general/dune-analytics/parachain-dashboards/interlay-dashboards",title:"Interlay Dashboards",description:"Interlay is a decentralized finance hub on Polkadot. It started as a native Bitcoin bridge, allowing users to mint and redeem iBTC on the Polkadot network. iBTC is a trustless, decentralized, and interoperable token redeemable one-for-one with native Bitcoin.",source:"@site/../docs/general/dune-analytics/parachain-dashboards/interlay-dashboards.md",sourceDirName:"general/dune-analytics/parachain-dashboards",slug:"/general/dune-analytics/interlay-dashboards",permalink:"/docs/general/dune-analytics/interlay-dashboards",draft:!1,editUrl:"https://github.com/w3f/polkadot-wiki/edit/master/docs/general/dune-analytics/parachain-dashboards/interlay-dashboards.md",tags:[],version:"current",lastUpdatedBy:"MK",lastUpdatedAt:1717658873,formattedLastUpdatedAt:"Jun 6, 2024",frontMatter:{id:"interlay-dashboards",title:"Interlay Dashboards",sidebar_label:"Interlay",description:"Interlay is a decentralized finance hub on Polkadot. It started as a native Bitcoin bridge, allowing users to mint and redeem iBTC on the Polkadot network. iBTC is a trustless, decentralized, and interoperable token redeemable one-for-one with native Bitcoin.",keywords:["polkadot","dashboard","dune","interlay","DeFi"],slug:"../interlay-dashboards"},sidebar:"docs",previous:{title:"Acala",permalink:"/docs/general/dune-analytics/acala-dashboards"},next:{title:"Bifrost",permalink:"/docs/general/dune-analytics/bifrost-dashboards"}},u={},c=[{value:"Overview",id:"overview",level:2},{value:"Featured Dashboards on Dune",id:"featured-dashboards-on-dune",level:2},{value:"Key Tables",id:"key-tables",level:2},{value:"Useful Queries",id:"useful-queries",level:2},{value:"Getting Started with Queries",id:"getting-started-with-queries",level:2}],p={toc:c},h="wrapper";function m(e){var t=e.components,a=(0,r.Z)(e,l);return(0,i.kt)(h,(0,n.Z)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"interlay-dashboards"},"Interlay Dashboards"),(0,i.kt)("h2",{id:"overview"},"Overview"),(0,i.kt)("p",null,"Interlay is a decentralized finance hub on Polkadot. It started as a native Bitcoin bridge, allowing\nusers to mint and redeem iBTC on the Polkadot network. iBTC is a trustless, decentralized, and\ninteroperable token redeemable one-for-one with native Bitcoin."),(0,i.kt)("p",null,"In the summer of 2023, Interlay also launched a DEX and a lending protocol. While the DEX has seen\nliquidity disappear after rewards were stopped, the lending protocol has seen continued usage."),(0,i.kt)("p",null,"Vaults play a crucial role for iBTC, as they guarantee the value of the minted iBTC through vault\ncollateral. Currently, vault collateral can be DOT, VDOT, USDC, USDT, and lend tokens (qDOT, qUSDT,\netc.) from the lending protocol. When using lend tokens, vault operators are double dipping: earning\ninterest on the currency lent, and earning vault rewards."),(0,i.kt)("p",null,"New currencies can be added to the Interlay protocol via governance proposals. The governance token,\nINTR, is used to vote on these proposals. Only staked INTR can vote, and the staked INTR is locked\nfor a period of time."),(0,i.kt)("h2",{id:"featured-dashboards-on-dune"},"Featured Dashboards on Dune"),(0,i.kt)("p",null,"Here you'll find a variety of dashboards that help visualize data from the Interlay parachain:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://dune.com/substrate/polkadot-interlay"},"interlay on Polkadot"),": This dashboard provides a\ncomprehensive view of iBTC minting, redeeming, lending, borrowing, and vault rewards.")),(0,i.kt)("h2",{id:"key-tables"},"Key Tables"),(0,i.kt)("p",null,"Data from the interlay parachain is organized into several key tables: ",(0,i.kt)("inlineCode",{parentName:"p"},"interlay.balances"),",\n",(0,i.kt)("inlineCode",{parentName:"p"},"interlay.blocks"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"interlay.calls"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"interlay.events"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"interlay.extrinsics"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"interlay.transfers"),",\n",(0,i.kt)("inlineCode",{parentName:"p"},"interlay.traces")),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"interlay.traces")," table is created by a snapshot script utilizing Interlay API calls to fetch\naccurate values which would be difficult to calculate from the blockchain events alone."),(0,i.kt)("h2",{id:"useful-queries"},"Useful Queries"),(0,i.kt)("p",null,"Some of the most important queries for Interlay are made available as materialized views."),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Subject Area"),(0,i.kt)("th",{parentName:"tr",align:null},"Query"),(0,i.kt)("th",{parentName:"tr",align:null},"Materialized View"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Vault Collateral"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://dune.com/queries/3437565"},"query_3437565")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"dune.substrate.result_interlay_vault_creation")),(0,i.kt)("td",{parentName:"tr",align:null},"Provides vaults and their collateral.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Interlay Oracle"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://dune.com/queries/3445402"},"query_3445402")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"dune.substrate.result_interlay_oracle")),(0,i.kt)("td",{parentName:"tr",align:null},"Provides hourly oracle values for all currencies present on the parachain.")))),(0,i.kt)("p",null,"Dune users are encouraged to study the source code of the queries, including parts of a query that\nmay have been commented out for future use."),(0,i.kt)("p",null,"Uncommenting these parts may accelerate your effort of adopting a query to a slightly different use\ncase."),(0,i.kt)("h2",{id:"getting-started-with-queries"},"Getting Started with Queries"),(0,i.kt)("p",null,"To get started with querying data from Interlay, you are welcome to use the mentioned materialized\nqueries. You can also use the following DuneSQL queries as examples:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sql",metastring:'title="Interlay Loan Market Data" showLineNumbers',title:'"Interlay',Loan:!0,Market:!0,'Data"':!0,showLineNumbers:!0},"WITH ASSETS AS(\n    SELECT symbol, decimals\n    FROM (VALUES\n    ('DOT', 10),\n    ('INTR', 10),\n    ('IBTC', 8)) AS t(symbol, decimals)\n), LOANDATA AS\n(\nSELECT\nE.block_time,\nE.method,\nevent_id,\nCOALESCE(CAST(JSON_VALUE(data, 'strict $[0].token') as varchar), FA.symbol) as token,\n--json_array_length(data) as len,\n--COALESCE(ASSETS.decimals, FA.decimals) as token_decimals,\nCAST(JSON_VALUE(data, 'strict $[1]') AS UINT256)/POW(10,COALESCE(ASSETS.decimals, FA.decimals)) as total_borrows,\nCAST(JSON_VALUE(data, 'strict $[2]') AS UINT256)/POW(10,COALESCE(ASSETS.decimals, FA.decimals)) as total_reserves,\nCAST(JSON_VALUE(data, 'strict $[3]') AS UINT256)/1e18 as borrow_index,\nCAST(JSON_VALUE(data, 'strict $[4]') AS UINT256)/1e6 as utilization,\nCAST(JSON_VALUE(data, 'strict $[5]') AS UINT256)/1e18 as borrow_rate,\nCAST(JSON_VALUE(data, 'strict $[6]') AS UINT256)/1e18 as supply_rate,\nCAST(JSON_VALUE(data, 'strict $[7]') AS UINT256)/1e18 as exchange_rate\nfrom interlay.events E\nLEFT join query_3564454 FA on FA.foreign_asset=CAST(JSON_VALUE(data, 'strict $[0].foreignAsset') as INT)\nLEFT JOIN ASSETS on ASSETS.symbol=JSON_VALUE(data, 'strict $[0].token')\nwhere E.section='loans' and E.method='InterestAccrued'\n)\nSELECT\ndate_trunc('hour', block_time) as hour_period,\ntoken,\navg(total_borrows) as total_borrows,\navg(total_reserves) as total_reserves,\navg(borrow_index) as borrow_index,\navg(utilization) as utilization,\navg(borrow_rate) as borrow_rate,\navg(supply_rate) as supply_rate,\navg(exchange_rate) as exchange_rate\nFROM LOANDATA\nGROUP BY 1, 2\norder by 1 desc\n\n\n")),(0,i.kt)("p",null,"The query is fairly typical for a parachain query on Dune. It parses events from the\n",(0,i.kt)("inlineCode",{parentName:"p"},"interlay.events")," table, and calculates the average values for each hour."),(0,i.kt)("p",null,"It also joins the ",(0,i.kt)("inlineCode",{parentName:"p"},"interlay.events")," table with another query, ",(0,i.kt)("inlineCode",{parentName:"p"},"query_3564454"),", which provides the\nforeign assets used in the loan market."),(0,i.kt)("p",null,"Finally, it uses the ",(0,i.kt)("inlineCode",{parentName:"p"},"ASSETS")," CTE to provide the decimals for each native token in the loan market.\nThe native assets are not available on chain, so they are hardcoded in the ",(0,i.kt)("inlineCode",{parentName:"p"},"ASSETS")," CTE. However,\nthey are unlikely to change over time, so this is safe."),(0,i.kt)("p",null,"The query uses Dune's native UINT256 type extensively, which allows to deal with very large numbers\nand still maintain precision."),(0,i.kt)("p",null,"Query result:"),(0,i.kt)("iframe",{src:"https://dune.com/embeds/3574287/6017896/",height:"350",width:"100%"}),(0,i.kt)("admonition",{title:"DuneSQL Reference",type:"info"},(0,i.kt)("p",{parentName:"admonition"},"For more information on DuneSQL, please refer to the ",(0,i.kt)("a",{parentName:"p",href:"/docs/general/dunesql-cheatsheet"},"DuneSQL Cheatsheet"),"\nand\n",(0,i.kt)("a",{parentName:"p",href:"https://docs.dune.com/query-engine/Functions-and-operators/index"},"DuneSQL Official Documentation"),".")))}m.isMDXComponent=!0}}]);