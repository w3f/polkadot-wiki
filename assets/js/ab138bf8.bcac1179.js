(self.webpackChunk=self.webpackChunk||[]).push([[8791],{7940:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var a=n(4165),o=n(5861),r=n(7294),i=n(3444),s=n(7764),p=n(7425);function l(e,t,n){return c.apply(this,arguments)}function c(){return(c=(0,o.Z)((0,a.Z)().mark((function e(t,n,o){var r,p,l,c,u;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=void 0,p=void 0,e.t0=t,e.next="polkadot"===e.t0?5:"kusama"===e.t0?7:"statemine"===e.t0?9:"statemint"===e.t0?11:13;break;case 5:return r="wss://rpc.polkadot.io",e.abrupt("break",14);case 7:return r="wss://kusama-rpc.polkadot.io/",e.abrupt("break",14);case 9:return r="wss://statemine-rpc.polkadot.io/",e.abrupt("break",14);case 11:return r="wss://statemint-rpc.polkadot.io/",e.abrupt("break",14);case 13:console.log("Unknown socket url provided, no connection made.");case 14:if(void 0!==r){e.next=18;break}return e.abrupt("return");case 18:return l=new i.U(r),e.next=21,s.G.create({provider:l});case 21:c=e.sent,(u=n.split(".")).forEach((function(e){e in c&&(c=c[e])})),e.t1=u[0],e.next="consts"===e.t1?27:"query"===e.t1?29:34;break;case 27:return p=c.toString(),e.abrupt("break",35);case 29:return e.next=31,c();case 31:return p=(p=e.sent).toString(),e.abrupt("break",35);case 34:console.log("Unknown path prefix ("+u[0]+") in "+n);case 35:return e.abrupt("return",p);case 36:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(e,t,n,a){switch(t){case"humanReadable":(0,p.HumanReadable)(e,n,a);break;case"precise":(0,p.Precise)(e,n,a);break;case"blocksToDays":(0,p.BlocksToDays)(e,a);break;default:return void console.log("Ignoring unknown filter type")}}const h=function(e){var t=e.network,n=e.path,i=e.defaultValue,s=e.filter,p=void 0===s?void 0:s,c=(0,r.useState)(""),h=c[0],m=c[1];return t=t.toLowerCase(),(0,r.useEffect)((function(){void 0!==p?u(i.toString(),p,t,m):m(i.toString());var e=void 0;switch(t){case"polkadot":e="wss://rpc.polkadot.io";break;case"kusama":e="wss://kusama-rpc.polkadot.io/";break;case"statemine":e="wss://statemine-rpc.polkadot.io/";break;case"statemint":e="wss://statemint-rpc.polkadot.io/";break;default:console.log("Unknown network provided, "+t)}if(void 0===e)console.log("Failed to connect to a valid websocket, applying default");else{var r=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(t,n,m);case 2:if(void 0!==(o=e.sent)){e.next=7;break}return e.abrupt("return");case 7:void 0!==p?u(o,p,t,m):m(o);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();try{r()}catch(s){console.log(s)}}}),[]),h}},7425:e=>{var t={polkadot:{precision:1e10,symbol:"DOT"},kusama:{precision:1e12,symbol:"KSM"},statemint:{precision:1e10,symbol:"DOT"},statemine:{precision:1e12,symbol:"KSM"}};e.exports={HumanReadable:function(e,n,a){var o=void 0;if("polkadot"===n||"statemint"===n)o=3;else{if("kusama"!==n&&"statemine"!==n)return void console.log("Unknown network type found when attempting to apply 'Human Readable' filter");o=6}e=parseFloat(e),a((e=Number.isInteger(e/t[n].precision)?e/t[n].precision+" "+t[n].symbol:(e/t[n].precision).toFixed(o)+" "+t[n].symbol).toString())},Precise:function(e,n,a){a(e=(e=parseFloat(e))/t[n].precision+" "+t[n].symbol)},BlocksToDays:function(e,t){t((e=6*e/86400).toString())}}},3433:(e,t,n)=>{"use strict";n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>l,default:()=>d,frontMatter:()=>p,metadata:()=>c,toc:()=>h});var a=n(7462),o=n(3366),r=(n(7294),n(3905)),i=n(7940),s=["components"],p={id:"learn-proxies",title:"Proxy Accounts",sidebar_label:"Proxy Accounts",description:"Learn about account proxies and how they can benefit your account(s).",keywords:["proxy","proxies","proxy accounts","proxy types"],slug:"../learn-proxies"},l=void 0,c={unversionedId:"learn/learn-proxies",id:"learn/learn-proxies",title:"Proxy Accounts",description:"Learn about account proxies and how they can benefit your account(s).",source:"@site/../docs/learn/learn-proxies.md",sourceDirName:"learn",slug:"/learn-proxies",permalink:"/docs/learn-proxies",draft:!1,editUrl:"https://github.com/w3f/polkadot-wiki/edit/master/docs/learn/learn-proxies.md",tags:[],version:"current",lastUpdatedBy:"Filippo",lastUpdatedAt:1665482104,formattedLastUpdatedAt:"Oct 11, 2022",frontMatter:{id:"learn-proxies",title:"Proxy Accounts",sidebar_label:"Proxy Accounts",description:"Learn about account proxies and how they can benefit your account(s).",keywords:["proxy","proxies","proxy accounts","proxy types"],slug:"../learn-proxies"},sidebar:"docs",previous:{title:"Multi-Signature Accounts",permalink:"/docs/learn-account-multisig"},next:{title:"Assets",permalink:"/docs/learn-assets"}},u={},h=[{value:"Why use a Proxy?",id:"why-use-a-proxy",level:2},{value:"Creating Proxy",id:"creating-proxy",level:2},{value:"Proxy Types",id:"proxy-types",level:2},{value:"Any Proxy",id:"any-proxy",level:3},{value:"Non-transfer Proxy",id:"non-transfer-proxy",level:3},{value:"Governance Proxy",id:"governance-proxy",level:3},{value:"Staking Proxy",id:"staking-proxy",level:3},{value:"Identity Judgement Proxy",id:"identity-judgement-proxy",level:3},{value:"Cancel Proxy",id:"cancel-proxy",level:3},{value:"Auction Proxy",id:"auction-proxy",level:3},{value:"Removing Proxy",id:"removing-proxy",level:2},{value:"How to view your Proxy",id:"how-to-view-your-proxy",level:2},{value:"Proxy Deposits",id:"proxy-deposits",level:2},{value:"Time-delayed Proxy",id:"time-delayed-proxy",level:2},{value:"Proxy calls",id:"proxy-calls",level:2},{value:"Nested Proxy Calls",id:"nested-proxy-calls",level:3},{value:"Anonymous Proxy (Pure Proxy)",id:"anonymous-proxy-pure-proxy",level:2},{value:"Create and Remove Pure Proxy",id:"create-and-remove-pure-proxy",level:3},{value:"Use of Pure Proxy",id:"use-of-pure-proxy",level:3},{value:"Why Pure Proxy?",id:"why-pure-proxy",level:3},{value:"Enhanced Security",id:"enhanced-security",level:4},{value:"Simplified and Secure Account Management at a Corporate Level",id:"simplified-and-secure-account-management-at-a-corporate-level",level:4},{value:"Multi-signature Account Management",id:"multi-signature-account-management",level:4},{value:"Scenario One: One Anonymous Proxy within a Multisig",id:"scenario-one-one-anonymous-proxy-within-a-multisig",level:4},{value:"Scenario Two: Multisig made of Anonymous Proxies",id:"scenario-two-multisig-made-of-anonymous-proxies",level:4}],m={toc:h};function d(e){var t=e.components,p=(0,o.Z)(e,s);return(0,r.kt)("wrapper",(0,a.Z)({},m,p,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Much like controller accounts in\n",(0,r.kt)("a",{parentName:"p",href:"/docs/learn-staking#stash-and-controller-accounts-for-staking"},"staking"),", proxies allow users to use an\naccount (it can be in cold storage or a hot wallet) less frequently but actively participate in the\nnetwork with the weight of the tokens in that account. Proxies can be viewed as a more powerful and\nflexible version of a controller account, i.e. proxies are allowed to perform a limited amount of\nactions related to specific ",(0,r.kt)("a",{parentName:"p",href:"https://docs.substrate.io/reference/frame-pallets/"},"substrate pallets"),"\non behalf of another account. The video below contains more information about using proxies."),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://www.youtube.com/watch?v=1tcygkq52tU"},(0,r.kt)("img",{parentName:"a",src:"https://img.youtube.com/vi/1tcygkq52tU/0.jpg",alt:"Proxy Accounts"}))),(0,r.kt)("h2",{id:"why-use-a-proxy"},"Why use a Proxy?"),(0,r.kt)("p",null,"Proxies are helpful because they let you delegate efficiently and add a layer of security. Rather\nthan using funds in a single account, smaller accounts with unique roles can complete tasks on\nbehalf of the main stash account. Proxies can be ",(0,r.kt)("em",{parentName:"p"},"hotter")," than the initial account, which can be\nkept cold, but the ",(0,r.kt)("em",{parentName:"p"},"weight")," of the tokens in the colder account can be used by the hotter accounts.\nThis increases the security of your accounts by minimizing the number of transactions the cold\naccount has to make. This also drives attention away from the stash account, although it is possible\nto determine the relationship between the proxy and the proxied account."),(0,r.kt)("p",null,"From the security perspective, we can imagine proxies as bodyguards of a VIP, loyal and ready to\nrisk their lives to ensure the VIP's protection. But proxies are also useful in other contexts such\nas efficient account management at the corporate level. They also provide an elegant solution to\nchange signatories within multi-signature accounts, and they can be used within proxy calls and\nnested proxy calls. In this page we will explore all these interesting use cases of proxies within\nthe Polkadot ecosystem."),(0,r.kt)("p",null,"Shown below is an example of how you might use these accounts. Imagine you have one stash account as\nyour primary token-holding account and don't want to access it very often, but you want to\nparticipate in staking to earn staking rewards. You could set one of your existing accounts as a\nstaking proxy for that stash account. The stash account is also the controller here, but it does not\nmatter because you will always use your staking proxy to sign staking-related transactions."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"proxies",src:n(7244).Z,width:"1920",height:"800"})),(0,r.kt)("p",null,"If you just use a controller that is not a staking proxy, the stash account will still have to sign\nfor some staking-related transactions such as ",(0,r.kt)("em",{parentName:"p"},"bond more funds")," and ",(0,r.kt)("em",{parentName:"p"},"change controller account"),"\n(Figure ",(0,r.kt)("em",{parentName:"p"},"left"),"). But if you have a staking proxy, everything will be signed by the proxy, making the\nstash account even more isolated (Figure ",(0,r.kt)("em",{parentName:"p"},"right"),"). In other words, the account assigned as a staking\nproxy of the stash can participate in staking on behalf of that stash. If the proxy is compromised,\nit doesn't have access to transfer-related transactions, so the stash account could just set a new\nproxy to replace it."),(0,r.kt)("p",null,"Creating multiple proxy accounts that act for a single account, lets you come up with more granular\nsecurity practices around how you protect private keys while still being able to actively\nparticipate in a network."),(0,r.kt)("h2",{id:"creating-proxy"},"Creating Proxy"),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"To create a ",(0,r.kt)("strong",{parentName:"p"},"proxy account")," read\n",(0,r.kt)("a",{parentName:"p",href:"https://support.polkadot.network/support/solutions/articles/65000182179-how-to-create-a-proxy-account"},"this support article"),".")),(0,r.kt)("h2",{id:"proxy-types"},"Proxy Types"),(0,r.kt)("p",null,"You can set up a proxy account via the proxy pallet. When you set a proxy, you must choose a type of\nproxy for the relationship. Polkadot offers:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Any"),(0,r.kt)("li",{parentName:"ul"},"Non-transfer"),(0,r.kt)("li",{parentName:"ul"},"Governance"),(0,r.kt)("li",{parentName:"ul"},"Staking"),(0,r.kt)("li",{parentName:"ul"},"Identity Judgement"),(0,r.kt)("li",{parentName:"ul"},"Auction")),(0,r.kt)("p",null,"When a proxy account makes a transaction, Polkadot filters the desired transaction to ensure that\nthe proxy account has the appropriate permission to make that transaction on behalf of the cold\naccount. For example, staking proxies have permission to do only staking-related transactions."),(0,r.kt)("h3",{id:"any-proxy"},"Any Proxy"),(0,r.kt)("p",null,"As implied by the name, a proxy type of ",(0,r.kt)("strong",{parentName:"p"},"Any")," allows the proxy account to make any transaction,\nincluding balance transfers. In most cases, this should be avoided as the proxy account is used more\nfrequently than the cold account and is therefore less secure."),(0,r.kt)("h3",{id:"non-transfer-proxy"},"Non-transfer Proxy"),(0,r.kt)("p",null,"Proxies that are of the type ",(0,r.kt)("strong",{parentName:"p"},"Non-transfer")," are accounts that allow any type of transaction except\n",(0,r.kt)("a",{parentName:"p",href:"/docs/learn-balance-transfers"},"balance transfers")," (including ",(0,r.kt)("a",{parentName:"p",href:"/docs/learn-DOT/#vesting"},"vested"),"\ntransfers)."),(0,r.kt)("h3",{id:"governance-proxy"},"Governance Proxy"),(0,r.kt)("p",null,"The ",(0,r.kt)("strong",{parentName:"p"},"Governance")," type will allow proxies to make transactions related to governance (i.e., from\nthe Democracy, Council, Treasury, Technical Committee, and Elections pallets)."),(0,r.kt)("admonition",{title:"Explainers on governance proxies",type:"note"},(0,r.kt)("p",{parentName:"admonition"},"See ",(0,r.kt)("a",{parentName:"p",href:"/docs/maintain-guides-democracy#governance-proxies"},"Governance")," for more information\non governance proxies or watch our\n",(0,r.kt)("a",{parentName:"p",href:"https://www.youtube.com/watch?v=q5qLFhG4SDw&list=PLOyWqupZ-WGuAuS00rK-pebTMAOxW41W8&index=27&ab_channel=Polkadot"},"technical explainer video that explores this concept"),".")),(0,r.kt)("h3",{id:"staking-proxy"},"Staking Proxy"),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"Visit the ",(0,r.kt)("a",{parentName:"p",href:"/docs/learn-staking-advanced/#staking-proxies"},"Advanced Staking Concepts page")," for more detailed information about staking proxies.")),(0,r.kt)("p",null,"The ",(0,r.kt)("strong",{parentName:"p"},"Staking")," type allows staking-related transactions. Do not confuse a staking proxy with the\ncontroller account. Within the staking pallet, some transactions must come from the stash account,\nwhile others must come from the controller account. The stash account is meant to stay in cold\nstorage, while the controller account makes day-to-day transactions like setting session keys or\ndeciding which validators to nominate. The stash account still needs to make some transactions such\nas bonding extra funds or designating a new controller account. A proxy doesn't change the ",(0,r.kt)("em",{parentName:"p"},"roles"),"\nof stash and controller accounts but does allow the stash to be accessed even less frequently than\nusing a controller account."),(0,r.kt)("admonition",{title:"Do not use Staking proxy for participating in Nomination Pools",type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"Use a ",(0,r.kt)("a",{parentName:"p",href:"#non-transfer-proxy"},"non-transfer")," instead of a staking proxy to participate in nomination\npools. The staking proxy is not enabled to make successful calls to the nomination pools pallet.")),(0,r.kt)("h3",{id:"identity-judgement-proxy"},"Identity Judgement Proxy"),(0,r.kt)("p",null,"The ",(0,r.kt)("strong",{parentName:"p"},"Identity Judgement")," proxies are in charge of allowing registrars to make judgments on an\naccount's identity. If you are unfamiliar with judgment and identities on chain, please refer to\n",(0,r.kt)("a",{parentName:"p",href:"/docs/learn-identity#judgements"},"this page"),"."),(0,r.kt)("h3",{id:"cancel-proxy"},"Cancel Proxy"),(0,r.kt)("p",null,"Proxies that are of the type ",(0,r.kt)("strong",{parentName:"p"},"Cancel")," allow accounts to reject and remove any time-delay proxy\nannouncements."),(0,r.kt)("h3",{id:"auction-proxy"},"Auction Proxy"),(0,r.kt)("p",null,"Proxies that are of the type ",(0,r.kt)("strong",{parentName:"p"},"Auction")," are accounts that allow transactions pertaining to\nparachain auctions and crowdloans. The Auction proxy account can sign those transactions on behalf\nof an account in cold storage. If you already set up a Non-transfer proxy account, it can do\neverything an Auction proxy can do. Before participating in a crowdloan using an Auction proxy, it\nis recommended that you check with the respective parachain team for any possible issues pertaining\nto the crowdloan rewards distribution."),(0,r.kt)("h2",{id:"removing-proxy"},"Removing Proxy"),(0,r.kt)("admonition",{title:"Removing proxies",type:"info"},(0,r.kt)("p",{parentName:"admonition"},'Read the section "Removing Proxies" on\n',(0,r.kt)("a",{parentName:"p",href:"https://support.polkadot.network/support/solutions/articles/65000182179-how-to-create-a-proxy-account"},"this support page"),"\nto learn how to remove proxies.")),(0,r.kt)("h2",{id:"how-to-view-your-proxy"},"How to view your Proxy"),(0,r.kt)("p",null,"To view your proxy, just go on the ",(0,r.kt)("em",{parentName:"p"},"Accounts")," menu in the Polkadot-JS UI, next to the proxied\naccount you will notice a blue icon. Hover on it, and you will see ",(0,r.kt)("em",{parentName:"p"},"Proxy overview"),". Click on it and\nyou will be presented with a list of all proxies for that account."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"view proxies",src:n(2273).Z,width:"1842",height:"120"})),(0,r.kt)("p",null,"Additionally, you can head over to the ",(0,r.kt)("em",{parentName:"p"},"Chain State")," tab (underneath the ",(0,r.kt)("em",{parentName:"p"},"Developer")," menu) on\n",(0,r.kt)("a",{parentName:"p",href:"https://polkadot.js.org/apps/?rpc=wss%3A%2F%2Frpc.polkadot.io#/chainstate"},"Polkadot-JS Apps"),". If\nyou've created your proxy on a Kusama account, it is required to change your network accordingly\nusing the top left navigation button. On this page, the proxy pallet should be selected, returning\nthe announcements and proxies functions. The proxies function will allow you to see your created\nproxies for either one account or for all accounts (using the toggle will enable this). Proxy\nannouncements are what time lock proxies do to announce they are going to conduct an action."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"view proxies",src:n(8902).Z,width:"1871",height:"820"})),(0,r.kt)("h2",{id:"proxy-deposits"},"Proxy Deposits"),(0,r.kt)("p",null,"Proxies require deposits in the native currency (i.e. DOT or KSM) to be created. The deposit is\nrequired because adding a proxy requires some storage space on-chain, which must be replicated\nacross every peer in the network. Due to the costly nature of this, these functions could open up\nthe network to a Denial-of-Service attack. To defend against this attack, proxies require a deposit\nto be reserved while the storage space is consumed over the lifetime of the proxy. When the proxy is\nremoved, so is the storage space, and therefore the deposit is returned."),(0,r.kt)("p",null,"The required deposit amount for ",(0,r.kt)("inlineCode",{parentName:"p"},"n")," proxies is equal to:"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"ProxyDepositBase")," + ",(0,r.kt)("inlineCode",{parentName:"p"},"ProxyDepositFactor")," ","*"," ",(0,r.kt)("inlineCode",{parentName:"p"},"n")),(0,r.kt)("p",null,"where the ",(0,r.kt)("inlineCode",{parentName:"p"},"ProxyDepositBase")," is the required amount to be reserved for an account to have a proxy\nlist (creates one new item in storage). For every proxy the account has, an additional amount\ndefined by the ",(0,r.kt)("inlineCode",{parentName:"p"},"ProxyDepositFactor")," is reserved as well (appends 33 bytes to storage location). The\n",(0,r.kt)("inlineCode",{parentName:"p"},"ProxyDepositBase")," is\n",(0,r.kt)(i.Z,{network:"polkadot",path:"consts.proxy.proxyDepositBase",defaultValue:20008e7,filter:"humanReadable",mdxType:"RPC"}),"\n","\nand the ",(0,r.kt)("inlineCode",{parentName:"p"},"ProxyDepositFactor")," is\n",(0,r.kt)(i.Z,{network:"polkadot",path:"consts.proxy.proxyDepositFactor",defaultValue:33e7,filter:"humanReadable",mdxType:"RPC"}),"","."),(0,r.kt)("h2",{id:"time-delayed-proxy"},"Time-delayed Proxy"),(0,r.kt)("p",null,"We can add a layer of security to proxies by giving them a delay time. The delay will be quantified\nin blocks. Polkadot has approximately 6\nseconds of block time. A delay value of 10 will mean ten blocks, which equals about one minute\ndelay. The proxy will announce its intended action and will wait for the number of blocks defined in\nthe delay time before executing it. The proxy will include the hash of the intended function call in\nthe announcement. Within this time window, the intended action may be canceled by accounts that\ncontrol the proxy. Now we can use proxies knowing that any malicious actions can be noticed and\nreverted within a delay period."),(0,r.kt)("admonition",{title:"The Polkadot-JS UI cannot handle complicated proxy setups",type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"The Polkadot-JS UI cannot handle complicated proxy setups (e.g. a proxy -> multisig -> an anonymous\nproxy which is part of another multisig). These complex setups must be done using the\n",(0,r.kt)("a",{parentName:"p",href:"https://polkadot.js.org/apps/#/extrinsics"},"extrinsics tab")," directly."),(0,r.kt)("p",{parentName:"admonition"},"These complex proxy setups should only be performed if you are comfortable enough interacting\ndirectly with the chain, as you will be unable to sign extrinsics using the UI.")),(0,r.kt)("h2",{id:"proxy-calls"},"Proxy calls"),(0,r.kt)("p",null,"Proxy calls are used by proxies to call proxied accounts. These calls are important for example in\nthe case of ",(0,r.kt)("em",{parentName:"p"},"pure")," proxies, as any attempt to sign transactions with a ",(0,r.kt)("em",{parentName:"p"},"pure")," proxy will fail. For\nmore details see the ",(0,r.kt)("a",{parentName:"p",href:"#anonymous-proxy-pure-proxy"},"dedicated section about anonymous proxies"),"."),(0,r.kt)("h3",{id:"nested-proxy-calls"},"Nested Proxy Calls"),(0,r.kt)("p",null,"As the term suggests, nested proxy calls are proxy calls within proxy calls. Such calls are needed\nif there are proxied accounts that are proxies themselves. In the example diagram below, Alice has a\nstash account that has a ",(0,r.kt)("em",{parentName:"p"},"staking")," proxy account, P-C. P-C is a ",(0,r.kt)("em",{parentName:"p"},"pure")," proxy, a proxied account\noriginally spawned by Charly that is now an ",(0,r.kt)("em",{parentName:"p"},"any")," proxy of P-C and signs everything on its behalf."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"nested proxy calls",src:n(1050).Z,width:"1920",height:"800"})),(0,r.kt)("p",null,"For example, to bond more funds, Charly needs to submit a ",(0,r.kt)("inlineCode",{parentName:"p"},"prox.proxy")," extrinsic to P-C, which in\nturn submits a ",(0,r.kt)("inlineCode",{parentName:"p"},"proxy.proxy")," extrinsic to Alice including for example a ",(0,r.kt)("inlineCode",{parentName:"p"},"staking.bondExtra"),"\nextrinsic, specifying the number of extra tokens that need to be bounded. If Charly wants to leave,\na new account can take his place as any proxy (before Charly leaves!). There is no need to change\nthe staking proxy account. Also, Alice is the only one who can remove P-C as a staking proxy, and\nP-C can only perform staking-related tasks. For example, P-C cannot send funds out from Alice's\naccount."),(0,r.kt)("p",null,"Proxy calls can be done using the Extrinsic Tab in the Polkadot-JS UI. Nested proxy calls can be\ndone by calling each ",(0,r.kt)("inlineCode",{parentName:"p"},"proxy.proxy")," extrinsic separately, or in some cases by just calling the last\n",(0,r.kt)("inlineCode",{parentName:"p"},"proxy.proxy")," extrinsic. In the diagram above, submitting the proxy call from P-C to Alice will\nautomatically ask for Charly's signature. Thus one proxy call will trigger the second one because\nCharly's is the only ",(0,r.kt)("em",{parentName:"p"},"any")," proxy of P-C, and P-C cannot sign anything. While if we want to use Bob's\naccount we will need to submit all three proxy calls."),(0,r.kt)("h2",{id:"anonymous-proxy-pure-proxy"},"Anonymous Proxy (Pure Proxy)"),(0,r.kt)("admonition",{title:"Risk of loss of funds",type:"danger"},(0,r.kt)("p",{parentName:"admonition"},"Read carefully the text below and before performing any action using anonymous proxies on\nPolkadot, experiment on the Westend testnet.")),(0,r.kt)("p",null,"Anonymous proxies are very different from other proxy types. The proxies we described so far are\n",(0,r.kt)("em",{parentName:"p"},"existing accounts")," assigned as proxies by a primary account. These proxies act on behalf of the\nprimary account, reducing the exposure of the primary account's private key. Remember, the more\noften we use an account's private key to sign transactions, the more we expose that key to the\ninternet, increasing the visibility of that account. The purpose of a proxy is thus to draw the\nattention of potential attackers away from the primary account, as proxies' private keys will be\nused most of the time to perform actions on behalf of the primary account."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"anonymous proxies",src:n(7012).Z,width:"1920",height:"800"})),(0,r.kt)("p",null,"Anonymous proxies are new accounts that are ",(0,r.kt)("em",{parentName:"p"},"created")," (not assigned) by a primary account. That\nprimary account then acts as ",(0,r.kt)("em",{parentName:"p"},"any")," proxy on behalf of the anonymous proxy. Anonymous proxies are\n",(0,r.kt)("strong",{parentName:"p"},"keyless non-deterministic accounts")," as they do not have a private key but they have an address\nthat is randomly generated. Also, in some sense, nobody owns an anonymous proxy as nobody has a\nprivate key to control them."),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("mdxAdmonitionTitle",{parentName:"admonition"},"Renaming Anonymous Proxies as ",(0,r.kt)("strong",{parentName:"mdxAdmonitionTitle"},"Pure Proxies")),(0,r.kt)("p",{parentName:"admonition"},"Anonymous proxies are not anonymous because they have an address that is spawned by a primary\naccount acting as ",(0,r.kt)("em",{parentName:"p"},"any")," proxy. Even if the ",(0,r.kt)("em",{parentName:"p"},"any")," proxy changes, it is still possible to find who\ngenerated the ",(0,r.kt)("em",{parentName:"p"},"anonymous")," proxy by going backward using a block explorer. There was thus the need to\nchange the name of ",(0,r.kt)("em",{parentName:"p"},"anonymous")," proxy. People suggested ",(0,r.kt)("em",{parentName:"p"},"keyless accounts")," since they do not have a\nprivate key and are proxied accounts. However, multisig accounts are also keyless (but\ndeterministic). Moreover, even if ",(0,r.kt)("em",{parentName:"p"},"anonymous")," proxies are proxied accounts, they can still act as\nproxies and control other accounts via proxy calls (see multisig example below). Thus, the name that\nhas been chosen is ",(0,r.kt)("strong",{parentName:"p"},"pure proxy"),". If you want to know more about the reasoning behind renaming of\npure proxies, see the discussion in ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/paritytech/substrate/pull/12283"},"this PR")," or\nthe discussion on ",(0,r.kt)("a",{parentName:"p",href:"https://forum.polkadot.network/t/parachain-technical-summit-next-steps/51/14"},"Polkadot forum"),".")),(0,r.kt)("p",null,"From now on we will thus use the term pure proxy instead of anonymous proxy."),(0,r.kt)("h3",{id:"create-and-remove-pure-proxy"},"Create and Remove Pure Proxy"),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"To create a ",(0,r.kt)("strong",{parentName:"p"},"pure proxy")," see\n",(0,r.kt)("a",{parentName:"p",href:"https://support.polkadot.network/support/solutions/articles/65000182196"},"this support article"),", or\nwatch ",(0,r.kt)("a",{parentName:"p",href:"https://www.youtube.com/watch?v=T443RcCYP24"},"this technical explainer video"),".")),(0,r.kt)("admonition",{title:"Removing Pure Proxies",type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"The procedure for removing a ",(0,r.kt)("em",{parentName:"p"},"pure"),' proxy is different from the one used to remove other proxies.\nVisit the section "Removing an Anonymous Proxy" on\n',(0,r.kt)("a",{parentName:"p",href:"https://support.polkadot.network/support/solutions/articles/65000182196"},"this support article"),", or\nwatch ",(0,r.kt)("a",{parentName:"p",href:"https://www.youtube.com/watch?v=T443RcCYP24"},"this technical explainer video"),".")),(0,r.kt)("admonition",{title:"Explainer video on Pure Proxies",type:"note"},(0,r.kt)("p",{parentName:"admonition"},"Learn more about pure proxies from our\n",(0,r.kt)("a",{parentName:"p",href:"https://www.youtube.com/watch?v=YkYApbhU3i0"},"technical explainer video"),".")),(0,r.kt)("h3",{id:"use-of-pure-proxy"},"Use of Pure Proxy"),(0,r.kt)("p",null,"The use of the ",(0,r.kt)("em",{parentName:"p"},"pure proxy")," is strictly bound to the relationship between the ",(0,r.kt)("em",{parentName:"p"},"pure proxy")," and the\n",(0,r.kt)("em",{parentName:"p"},"any")," proxy. Note that the ",(0,r.kt)("em",{parentName:"p"},"any")," proxy does not necessarily be the one who created the ",(0,r.kt)("em",{parentName:"p"},"pure proxy"),"\nin the first place. Hence, ",(0,r.kt)("em",{parentName:"p"},"pure proxies")," are not really owned by somebody, but they can be\ncontrolled. Once that relationship between the ",(0,r.kt)("em",{parentName:"p"},"pure proxy")," and its ",(0,r.kt)("em",{parentName:"p"},"any")," proxy is broken, the ",(0,r.kt)("em",{parentName:"p"},"pure\nproxy")," will be inaccessible (even if visible on the Polkadot-JS UI). Also, ",(0,r.kt)("em",{parentName:"p"},"pure proxies")," are\nnon-deterministic, meaning that if we lose one ",(0,r.kt)("em",{parentName:"p"},"pure proxy"),", the next one we create from the same\nprimary account will have a different address."),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Pure proxies")," cannot sign anything because they do not have private keys. However, although they do\nnot have private keys and cannot sign any transaction directly, they can act as proxies (or better,\nproxy channels) within ",(0,r.kt)("inlineCode",{parentName:"p"},"proxy.proxy")," calls (proxy calls). For example, it is possible to have ",(0,r.kt)("em",{parentName:"p"},"pure\nproxies")," within a multisig. Using proxy calls, it is possible to use the ",(0,r.kt)("em",{parentName:"p"},"any")," proxy to call the\n",(0,r.kt)("em",{parentName:"p"},"pure")," proxy, which in turn will do a multisig call. More about this later on."),(0,r.kt)("admonition",{type:"danger"},(0,r.kt)("p",{parentName:"admonition"},"Once you remove the relationship with ",(0,r.kt)("em",{parentName:"p"},"any")," proxy, the ",(0,r.kt)("em",{parentName:"p"},"pure")," proxy will be inaccessible. Also,\n",(0,r.kt)("em",{parentName:"p"},"pure")," proxies cannot sign for anything.")),(0,r.kt)("h3",{id:"why-pure-proxy"},"Why Pure Proxy?"),(0,r.kt)("p",null,"Despite their complexity and associated dangers, ",(0,r.kt)("em",{parentName:"p"},"pure")," proxies have important benefits that we\ndiscuss below."),(0,r.kt)("h4",{id:"enhanced-security"},"Enhanced Security"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Pure")," proxies cannot be stolen because they do not have private keys. The only accounts that have\nfull access to the ",(0,r.kt)("em",{parentName:"p"},"pure")," proxies are ",(0,r.kt)("em",{parentName:"p"},"any")," proxies. Security can be further increased if the ",(0,r.kt)("em",{parentName:"p"},"any"),"\nproxy is a multi-signature account."),(0,r.kt)("h4",{id:"simplified-and-secure-account-management-at-a-corporate-level"},"Simplified and Secure Account Management at a Corporate Level"),(0,r.kt)("admonition",{title:"Walk-through tutorial video",type:"info"},(0,r.kt)("p",{parentName:"admonition"},"You can see ",(0,r.kt)("a",{parentName:"p",href:"https://www.youtube.com/watch?v=YkYApbhU3i0"},"this video tutorial")," that goes through\nthis scenario. The tutorial requires some familiarity with the Extrinsic Tab of the Polkadot-JS UI.")),(0,r.kt)("p",null,"Probably the greatest benefit of using ",(0,r.kt)("em",{parentName:"p"},"pure")," proxies is the management of complex account\nrelationships at a corporate level. Let's take for example 3 accounts belonging to Charlie, Dan and\nEleanor working for Company X. Charlie holds funds belonging to Company X, but he wants to leave the\ncompany and transfer the economic responsibility to Eleanor. Dan is a staking proxy of Charlie."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Without ",(0,r.kt)("em",{parentName:"strong"},"Pure")," Proxy"),", Charlie must (see ",(0,r.kt)("em",{parentName:"p"},"left")," side of the Figure below):"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Remove Dan as a staking proxy, this step requires 1 signature"),(0,r.kt)("li",{parentName:"ul"},"Stop nominating and unbound all funds , this step requires 2 signatures"),(0,r.kt)("li",{parentName:"ul"},"Transfer the funds to Eleanor, this step requires 1 signature")),(0,r.kt)("p",null,"Then Eleanor adds Dan as a staking proxy (1 signature). The whole process requires 5 signatures.\nHere we are presenting a simple example, in fact, with multi-signature accounts and multiple proxies\nthe procedure would be more time-consuming and labor-intensive."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"why anonymous proxies",src:n(9518).Z,width:"1920",height:"800"})),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"With ",(0,r.kt)("em",{parentName:"strong"},"Pure")," Proxy")," (see ",(0,r.kt)("em",{parentName:"p"},"right")," side of the Figure above), Charlie must add Eleanor as ",(0,r.kt)("em",{parentName:"p"},"any"),"\nproxy of the ",(0,r.kt)("em",{parentName:"p"},"pure")," proxy, and remove himself (or Eleanor can remove him). The process requires just\n2 signatures (1 signature to add the new ",(0,r.kt)("em",{parentName:"p"},"any")," proxy and 1 signature the remove the old one). The\nfunds remain in the ",(0,r.kt)("em",{parentName:"p"},"pure")," proxy, and it is not necessary to stop nominating or unbond funds. Also,\nany proxy relationships with the ",(0,r.kt)("em",{parentName:"p"},"pure")," proxy stay in place. Thus, if we use the ",(0,r.kt)("em",{parentName:"p"},"pure")," proxy, with\nan increasing number of proxies we will always have to sign twice (not necessarily true in\nmulti-signature accounts). While if we are not using the ",(0,r.kt)("em",{parentName:"p"},"pure")," proxy, the more the proxies the more\nsignatures we need to detach them from the old stash and attach them to the new stash (see Figure\nbelow)."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"anon vs stash plot",src:n(5648).Z,width:"1920",height:"800"})),(0,r.kt)("h4",{id:"multi-signature-account-management"},"Multi-signature Account Management"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Pure")," proxies are useful to efficiently manage multi-signature (multisigs) accounts. In fact,\nmultisigs are deterministic, which means that once a multisig is created the signatories cannot be\nchanged. If one of the signatories wants to leave the multisig, a new multisig must be created. This\nis inconvenient, especially at corporate-level management where the chance of replacing someone\nwithin a multisig can be high. ",(0,r.kt)("em",{parentName:"p"},"Pure")," proxies allow keeping the same multisig when the signatories\nchange."),(0,r.kt)("h4",{id:"scenario-one-one-anonymous-proxy-within-a-multisig"},"Scenario One: One Anonymous Proxy within a Multisig"),(0,r.kt)("admonition",{title:"Walk-through tutorial video",type:"info"},(0,r.kt)("p",{parentName:"admonition"},"You can see ",(0,r.kt)("a",{parentName:"p",href:"https://www.youtube.com/watch?v=iGRoGstB_pQ"},"this video tutorial")," that goes through\nthis scenario. The tutorial requires some familiarity with the Extrinsic Tab of the Polkadot-JS UI.")),(0,r.kt)("p",null,"It is possible to put a ",(0,r.kt)("em",{parentName:"p"},"pure")," proxy within a multisig, and then transactions will be signed by the\n",(0,r.kt)("em",{parentName:"p"},"any")," proxy on behalf of the ",(0,r.kt)("em",{parentName:"p"},"pure")," proxy (proxied account). Let's take for example the diagram\nbelow. Alice, Bob and Anon are part of the multisig ABC, a multisig account with threshold 2. P-C is\na ",(0,r.kt)("em",{parentName:"p"},"pure")," proxy spawned by Charlie, who now acts as ",(0,r.kt)("em",{parentName:"p"},"any")," proxy and thus signs anything on behalf of\nP-C. The ",(0,r.kt)("em",{parentName:"p"},"pure")," proxy cannot sign directly because it does not have a private key. So, for example,\nto send funds from the multisig to Dan, Charly needs to submit a ",(0,r.kt)("inlineCode",{parentName:"p"},"proxy.proxy")," extrinsic to P-C,\nwhich in turn will submit a ",(0,r.kt)("inlineCode",{parentName:"p"},"multisig.asMulti")," extrinsic to ABC containing the call data for the\n",(0,r.kt)("inlineCode",{parentName:"p"},"balances.transferKeepAlive")," extrinsic about the transfer of some funds from ABC to Dan. Alice can\nthen approve the transfer by submitting a ",(0,r.kt)("inlineCode",{parentName:"p"},"multisig.asMulti")," extrinsic also containing the call data\nfor the ",(0,r.kt)("inlineCode",{parentName:"p"},"balances.transferKeepAlive")," extrinsic about the transfer of some funds from ABC to Dan."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"multisig with one anon",src:n(9372).Z,width:"1920",height:"800"})),(0,r.kt)("p",null,"If Charly wants to leave the multisig, a new ",(0,r.kt)("em",{parentName:"p"},"any")," proxy can be added to P-C and Charly can be\nremoved (by himself or by the new ",(0,r.kt)("em",{parentName:"p"},"any")," proxy). Note that the multisig also contains Bob that in\nthis specific example does not do anything."),(0,r.kt)("admonition",{title:"Proxy calls",type:"note"},(0,r.kt)("p",{parentName:"admonition"},"To use a ",(0,r.kt)("em",{parentName:"p"},"pure")," proxy within a multisig you need to use the Extrinsic Tab and generate a\n",(0,r.kt)("inlineCode",{parentName:"p"},"proxy.proxy")," extrinsic. If you try to sign a multisig transaction using the ",(0,r.kt)("em",{parentName:"p"},"pure")," proxy you will\nbe prompted with a warning. Remember, you cannot sign something directly if you do not have a\nprivate key.")),(0,r.kt)("h4",{id:"scenario-two-multisig-made-of-anonymous-proxies"},"Scenario Two: Multisig made of Anonymous Proxies"),(0,r.kt)("admonition",{title:"Walk-through Tutorial Video",type:"info"},(0,r.kt)("p",{parentName:"admonition"},"You can see ",(0,r.kt)("a",{parentName:"p",href:"https://www.youtube.com/watch?v=F82C3zDNJyk"},"this video tutorial")," that goes through\nthis scenario. The tutorial requires some familiarity with the Extrinsic Tab of the Polkadot-JS UI.")),(0,r.kt)("p",null,"The diagram below shows a multisig that is made only with ",(0,r.kt)("em",{parentName:"p"},"pure")," proxies (P-A, P-B and P-C). In this\nsituation Alice, Bob or Charly can leave the multisig at any time without the requirement of\ncreating a new multisig. If for example, Bob leaves the multisig the procedure will require somebody\nelse to be added as ",(0,r.kt)("em",{parentName:"p"},"any")," proxy to P-B, and then Bob can remove himself (or the new ",(0,r.kt)("em",{parentName:"p"},"any")," proxy can\nremove Bob)."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"multisig with anons",src:n(8047).Z,width:"1920",height:"800"})),(0,r.kt)("p",null,"In the diagram above, Alice submits the ",(0,r.kt)("inlineCode",{parentName:"p"},"proxy.proxy")," extrinsic to P-A, which in turn submits the\n",(0,r.kt)("inlineCode",{parentName:"p"},"multisig.asMulti")," extrinsic containing the ",(0,r.kt)("inlineCode",{parentName:"p"},"balances.transferKeepAlive")," extrinsic about the\ntransfer of some tokens from ABC to Dan. Then, Charly does the same to confirm the transaction. Note\nthat Charly will need to pay for some weight, for the computation that is necessary to execute the\ntransaction."))}d.isMDXComponent=!0},5648:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});const a=n.p+"assets/images/anon-vs-stash-plot-fa8f730710dbf5cbec2d7db43d5d962d.png"},7244:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});const a=n.p+"assets/images/controller-vs-staking-proxy-e91eb65d8dfb190eb9579550663a9b04.png"},8047:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});const a=n.p+"assets/images/multisig-with-anons-209a0f481e6a13ed943a952be07e1a75.png"},9372:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});const a=n.p+"assets/images/multisig-with-one-anon-b8bb0a5183fbdc1d1809d4cd58489ab4.png"},1050:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});const a=n.p+"assets/images/nested-proxy-calls-65bdc70624a0b21a087da639743c710d.png"},2273:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});const a=n.p+"assets/images/polkadot_view_proxies-5c65a3f24dc6902f1734de8887dd5696.png"},8902:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});const a=n.p+"assets/images/polkadot_view_proxies_dev-c7f33e592f2c37cade0cc3d37e356aef.png"},7012:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});const a=n.p+"assets/images/proxy-vs-anon-1e413e40583ef728f619824e6f714c6b.png"},9518:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});const a=n.p+"assets/images/why-anon-proxy-48fc32ddd2da9a5e9342554c68372d98.png"},3971:()=>{},6601:()=>{}}]);