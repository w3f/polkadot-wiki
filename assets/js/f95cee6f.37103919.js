"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9548],{3905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>h});var n=a(67294);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var l=n.createContext({}),c=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},d=function(e){var t=c(e.components);return n.createElement(l.Provider,{value:t},e.children)},p="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,i=e.mdxType,r=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),p=c(a),m=i,h=p["".concat(l,".").concat(m)]||p[m]||u[m]||r;return a?n.createElement(h,o(o({ref:t},d),{},{components:a})):n.createElement(h,o({ref:t},d))}));function h(e,t){var a=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=a.length,o=new Array(r);o[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[p]="string"==typeof e?e:i,o[1]=s;for(var c=2;c<r;c++)o[c]=a[c];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},24195:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>s,metadata:()=>c,toc:()=>p});var n=a(87462),i=a(63366),r=(a(67294),a(3905)),o=["components"],s={id:"maintain-guides-avoid-slashing",title:"Validator Best Practices",sidebar_label:"Validator Best Practices",description:"Best practices to avoid slashing.",keywords:["validator","rewards","slashing"],slug:"../maintain-guides-avoid-slashing"},l=void 0,c={unversionedId:"maintain/maintain-guides-avoid-slashing",id:"maintain/maintain-guides-avoid-slashing",title:"Validator Best Practices",description:"Best practices to avoid slashing.",source:"@site/../docs/maintain/maintain-guides-best-practices-to-avoid-slashes.md",sourceDirName:"maintain",slug:"/maintain-guides-avoid-slashing",permalink:"/docs/maintain-guides-avoid-slashing",draft:!1,editUrl:"https://github.com/w3f/polkadot-wiki/edit/master/docs/maintain/maintain-guides-best-practices-to-avoid-slashes.md",tags:[],version:"current",lastUpdatedBy:"Filippo",lastUpdatedAt:1714735401,formattedLastUpdatedAt:"May 3, 2024",frontMatter:{id:"maintain-guides-avoid-slashing",title:"Validator Best Practices",sidebar_label:"Validator Best Practices",description:"Best practices to avoid slashing.",keywords:["validator","rewards","slashing"],slug:"../maintain-guides-avoid-slashing"},sidebar:"docs",previous:{title:"Validator Community Overview",permalink:"/docs/maintain-guides-validator-community"},next:{title:"Archive",permalink:"/docs/maintain-archive"}},d={},p=[{value:"Best practices to prevent slashing",id:"best-practices-to-prevent-slashing",level:2},{value:"Equivocation",id:"equivocation",level:2},{value:"Application Related",id:"application-related",level:2},{value:"Examples",id:"examples",level:2}],u={toc:p},m="wrapper";function h(e){var t=e.components,a=(0,i.Z)(e,o);return(0,r.kt)(m,(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"best-practices-to-prevent-slashing"},"Best practices to prevent slashing"),(0,r.kt)("p",null,"Slashing is implemented as a deterrent for validators to misbehave. Slashes are applied to a\nvalidator\u2019s total stake (own + nominated) and can range from as little as 0.01% or rise to 100%. In\nall instances, slashes are accompanied by a loss of nominators."),(0,r.kt)("p",null,"A slash may occur under four circumstances:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Equivocation \u2013 A slash of 0.01% is applied with as little as a single evocation. The slashed\namount increases to 100% incrementally as more validators also equivocate."),(0,r.kt)("li",{parentName:"ol"},"Malicious action \u2013 This may result from a validator trying to represent the contents of a block\nfalsely. Slashing penalties of 100% may apply."),(0,r.kt)("li",{parentName:"ol"},"Application related (bug or otherwise) \u2013 The amount is unknown and may manifest as scenarios 1\nand 2 above.")),(0,r.kt)("p",null,"This article provides some best practices to prevent slashing based on lessons learned from previous\nslashes. It provides comments and guidance for all circumstances except for malicious action by the\nnode operator."),(0,r.kt)("h2",{id:"equivocation"},"Equivocation"),(0,r.kt)("p",null,"Equivocation events can occur when a validator produces two or more of the same block; under this\ncondition, it is referred to as a BABE equivocation. Equivocation may also happen when a validator\nsigns two or more of the same consensus vote; under this condition, it is referred to as a GRANDPA\nEquivocation. Equivocations usually occur when duplicate signing keys reside on the validator host.\nIf keys are never duplicated, the probability of an equivocation slash decreases to near 0. Check\nthe Wiki section on ",(0,r.kt)("a",{parentName:"p",href:"/docs/learn-staking-advanced#equivocation"},"Equivocation")," to learn more\nabout its specifics."),(0,r.kt)("p",null,"The following are scenarios that build towards slashes under equivocation:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Cloning a server, i.e., copying all contents when migrating to new hardware. This action should\nbe avoided. If an image is desired, it should be taken before keys are generated."),(0,r.kt)("li",{parentName:"ol"},"High Availability (HA) Systems \u2013 Equivocation can occur if there are any concurrent operations,\neither when a failed server restarts or if false positive event results in both servers being\nonline simultaneously. HA systems are to be treated with extreme caution and are not advised."),(0,r.kt)("li",{parentName:"ol"},"The keystore folder is copied when attempting to copy a database from one instance to another.",(0,r.kt)("br",{parentName:"li"}),"It is important to note that equivocation slashes occur with a single incident. This can happen\nif duplicated keystores are used for only a few seconds. A slash can result in losing\nnominators, and funds, removal from the Thousand Validator Programme, and reputational damage.")),(0,r.kt)("h2",{id:"application-related"},"Application Related"),(0,r.kt)("p",null,"In the past, there have been releases with bugs that lead to slashes; these issues are not as\nprevalent in current releases. The following are advised to node operators to ensure that they\nobtain pristine binaries or source code and to ensure the security of their node:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Always download either source files or binaries from the official Parity repository"),(0,r.kt)("li",{parentName:"ol"},"Verify the hash of downloaded files."),(0,r.kt)("li",{parentName:"ol"},"Use the W3F secure validator setup or adhere to its principles"),(0,r.kt)("li",{parentName:"ol"},"Ensure essential security items are checked, use a firewall, manage user access, use SSH\ncertificates"),(0,r.kt)("li",{parentName:"ol"},"Avoid using your server as a general-purpose system. Hosting a validator on your workstation or\none that hosts other services increases the risk of maleficence.")),(0,r.kt)("h2",{id:"examples"},"Examples"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Network"),(0,r.kt)("th",{parentName:"tr",align:null},"Era"),(0,r.kt)("th",{parentName:"tr",align:null},"Event Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Details"),(0,r.kt)("th",{parentName:"tr",align:null},"Action Taken"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Polkadot"),(0,r.kt)("td",{parentName:"tr",align:null},"774"),(0,r.kt)("td",{parentName:"tr",align:null},"Small Equivocation"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://matrix.to/#/!NZrbtteFeqYKCUGQtr:matrix.parity.io/$165562246360408hKCfC:matrix.org?via=matrix.parity.io&via=corepaper.org&via=matrix.org"},"The validator")," migrated servers and cloned the keystore folder. The on-chain event can be viewed ",(0,r.kt)("a",{parentName:"td",href:"https://polkadot.subscan.io/extrinsic/11190109-0?event=11190109-5"},"here"),"."),(0,r.kt)("td",{parentName:"tr",align:null},"The validator did not submit a request for the slash to be canceled.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Kusama"),(0,r.kt)("td",{parentName:"tr",align:null},"3329"),(0,r.kt)("td",{parentName:"tr",align:null},"Small Equivocation"),(0,r.kt)("td",{parentName:"tr",align:null},"The validator operated a test machine with cloned keys; the test machine was online at the same time as the primary, which resulted in a slash. Details can be found ",(0,r.kt)("a",{parentName:"td",href:"https://kusama.polkassembly.io/post/1343"},"here"),"."),(0,r.kt)("td",{parentName:"tr",align:null},"The validator requested a cancellation of the slash, but the council declined.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Kusama"),(0,r.kt)("td",{parentName:"tr",align:null},"3995"),(0,r.kt)("td",{parentName:"tr",align:null},"Small Equivocation"),(0,r.kt)("td",{parentName:"tr",align:null},"The validator noticed several errors, after which the client crashed, and a slash was applied. The validator recorded all events and opened GitHub issues to allow for technical opinions to be shared. Details can be found ",(0,r.kt)("a",{parentName:"td",href:"https://kusama.polkassembly.io/post/1733"},"here"),"."),(0,r.kt)("td",{parentName:"tr",align:null},"The validator requested to cancel the slash. The council approved the request as they believed the error was not operator related.")))))}h.isMDXComponent=!0}}]);