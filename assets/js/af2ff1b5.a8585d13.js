"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4458],{3905:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>m});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var o=n.createContext({}),d=function(e){var t=n.useContext(o),a=t;return e&&(a="function"==typeof e?e(t):s(s({},t),e)),a},u=function(e){var t=d(e.components);return n.createElement(o.Provider,{value:t},e.children)},p="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,o=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),p=d(a),h=r,m=p["".concat(o,".").concat(h)]||p[h]||c[h]||i;return a?n.createElement(m,s(s({ref:t},u),{},{components:a})):n.createElement(m,s({ref:t},u))}));function m(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,s=new Array(i);s[0]=h;var l={};for(var o in t)hasOwnProperty.call(t,o)&&(l[o]=t[o]);l.originalType=e,l[p]="string"==typeof e?e:r,s[1]=l;for(var d=2;d<i;d++)s[d]=a[d];return n.createElement.apply(null,s)}return n.createElement.apply(null,a)}h.displayName="MDXCreateElement"},26974:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>u,contentTitle:()=>o,default:()=>m,frontMatter:()=>l,metadata:()=>d,toc:()=>p});var n=a(87462),r=a(63366),i=(a(67294),a(3905)),s=["components"],l={id:"hydration-dashboards",title:"Hydration Dashboards",sidebar_label:"Hydration",description:"Hydration is a decentralized finance hub on Polkadot. Its main function is a DEX.",keywords:["polkadot","dashboard","dune","hydration","DeFi"],slug:"../hydration-dashboards"},o="Hydration Dashboards",d={unversionedId:"general/dune-analytics/parachain-dashboards/hydration-dashboards",id:"general/dune-analytics/parachain-dashboards/hydration-dashboards",title:"Hydration Dashboards",description:"Hydration is a decentralized finance hub on Polkadot. Its main function is a DEX.",source:"@site/../docs/general/dune-analytics/parachain-dashboards/hydration-dashboards.md",sourceDirName:"general/dune-analytics/parachain-dashboards",slug:"/general/dune-analytics/hydration-dashboards",permalink:"/docs/general/dune-analytics/hydration-dashboards",draft:!1,editUrl:"https://github.com/w3f/polkadot-wiki/edit/master/docs/general/dune-analytics/parachain-dashboards/hydration-dashboards.md",tags:[],version:"current",lastUpdatedBy:"MK",lastUpdatedAt:1717658873,formattedLastUpdatedAt:"Jun 6, 2024",frontMatter:{id:"hydration-dashboards",title:"Hydration Dashboards",sidebar_label:"Hydration",description:"Hydration is a decentralized finance hub on Polkadot. Its main function is a DEX.",keywords:["polkadot","dashboard","dune","hydration","DeFi"],slug:"../hydration-dashboards"},sidebar:"docs",previous:{title:"Bifrost",permalink:"/docs/general/dune-analytics/bifrost-dashboards"},next:{title:"DuneSQL Cheatsheet",permalink:"/docs/general/dunesql-cheatsheet"}},u={},p=[{value:"Overview",id:"overview",level:2},{value:"Featured Dashboards on Dune",id:"featured-dashboards-on-dune",level:2},{value:"Key Tables",id:"key-tables",level:2},{value:"Useful Queries",id:"useful-queries",level:2},{value:"Getting Started with Queries",id:"getting-started-with-queries",level:2}],c={toc:p},h="wrapper";function m(e){var t=e.components,a=(0,r.Z)(e,s);return(0,i.kt)(h,(0,n.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"hydration-dashboards"},"Hydration Dashboards"),(0,i.kt)("h2",{id:"overview"},"Overview"),(0,i.kt)("p",null,"Hydration, formerly known as HydraDX, is a decentralized finance hub on Polkadot. It offers several\ntypes of DEX pools:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Omnipool: a single liquidity pool for assets that have been vetted by governance. Typically, these\nwould be currencies that have existed for a while and are expected to generate a high volume of\ntrades."),(0,i.kt)("li",{parentName:"ul"},"Stable pools: pools where all coins in the same pool are expected to trade almost at the same\nprice, e.g. USDC/USDT."),(0,i.kt)("li",{parentName:"ul"},"xyk-pools: pools where the price of the assets is determined by the x ","*"," y = k formula, also known\nas the constant product formula.")),(0,i.kt)("p",null,"Users can swap from any asset to any other asset using an automated router that will calculate the\nmost efficient path."),(0,i.kt)("p",null,"Liquidity providers can earn fees from the trades in the pools they provide liquidity to."),(0,i.kt)("h2",{id:"featured-dashboards-on-dune"},"Featured Dashboards on Dune"),(0,i.kt)("p",null,"Here you'll find a variety of dashboards that help visualize data from the Hydration parachain:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://dune.com/substrate/hydradx"},"hydration on Polkadot"),": This dashboard provides a\ncomprehensive view of DEX volumes and liquidity on the Hydration parachain.")),(0,i.kt)("h2",{id:"key-tables"},"Key Tables"),(0,i.kt)("p",null,"Data from the hydration parachain is organized into several key tables: ",(0,i.kt)("inlineCode",{parentName:"p"},"hydradx.balances"),",\n",(0,i.kt)("inlineCode",{parentName:"p"},"hydradx.blocks"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"hydradx.calls"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"hydradx.events"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"hydradx.extrinsics"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"hydradx.transfers"),",\n",(0,i.kt)("inlineCode",{parentName:"p"},"hydradx.traces")),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"hydradx.traces")," table is created by a snapshot script utilizing Hydration API calls to fetch\naccurate values which would be difficult to calculate from the blockchain events alone."),(0,i.kt)("h2",{id:"useful-queries"},"Useful Queries"),(0,i.kt)("p",null,"Some of the most important queries for Hydration are made available as materialized views."),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Subject Area"),(0,i.kt)("th",{parentName:"tr",align:null},"Query"),(0,i.kt)("th",{parentName:"tr",align:null},"Materialized View"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Oracle"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://dune.com/queries/3459562"},"query_3459562")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"dune.substrate.result_hydradx_oracle")),(0,i.kt)("td",{parentName:"tr",align:null},"Provides hourly oracle values for all currencies present in the omnipool. Uses LRNA.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Oracle (Alt.)"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://dune.com/queries/3573146"},"query_3573146")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"dune.substrate.result_hydra_dx_oracle_new")),(0,i.kt)("td",{parentName:"tr",align:null},"Provides hourly oracle values for all currencies present in the omnipool. Uses DOT.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Oracle (Alt. Daily)"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://dune.com/queries/3445402"},"query_3445402")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"dune.substrate.result_hydra_dx_oracle_new_daily")),(0,i.kt)("td",{parentName:"tr",align:null},"Same, but aggregated daily.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Oracle Pairs"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://dune.com/queries/3483707"},"query_3483707")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"dune.substrate.result_hydra_dx_oracle_pairs")),(0,i.kt)("td",{parentName:"tr",align:null},"Provides volume and transaction counts for all pairwise trades in the omnipool.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Omnipool Liquidity"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://dune.com/queries/3507194"},"query_3507194")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"dune.substrate.result_hydradx_liquidity_master")),(0,i.kt)("td",{parentName:"tr",align:null},"Provides liquidity in the Omnipool on a per-account basis.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Assets"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://dune.com/queries/3482301"},"query_3482301")),(0,i.kt)("td",{parentName:"tr",align:null},"N/A"),(0,i.kt)("td",{parentName:"tr",align:null},"Provides asset_id, symbol, and decimals for all assets in the Hydration parachain.")))),(0,i.kt)("p",null,"The first Oracle query is the recommended one to use for any oracle use cases that are not\nhistorical in nature. This is because it relies on the most reliable mechanism for determining the\nactual price, using the intermediate LRNA token price. This level of detail is only available from\nJan. 2024 onwards."),(0,i.kt)("p",null,"For historical price analysis, the alternative oracle query uses DOT as the intermediate currency.\nIt may be slightly less accurate and take a bit longer to calculate."),(0,i.kt)("p",null,"Liquidity in the Omnipool is calculated on a per-account basis, using the NFT positions that\nrepresent shares in the Omnipool."),(0,i.kt)("p",null,"Dune users are encouraged to study the source code of the queries, including parts of a query that\nmay have been commented out for future use."),(0,i.kt)("p",null,"Uncommenting these parts may accelerate your effort of adopting a query to a slightly different use\ncase."),(0,i.kt)("h2",{id:"getting-started-with-queries"},"Getting Started with Queries"),(0,i.kt)("p",null,"To get started with querying data from Hydration, you are welcome to use the mentioned materialized\nqueries. You can also use the following DuneSQL queries as examples:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sql",metastring:'title="Hydration Omnipool Asset (Latest)" showLineNumbers',title:'"Hydration',Omnipool:!0,Asset:!0,'(Latest)"':!0,showLineNumbers:!0},"WITH MaxTimestamps AS (\n  SELECT\n    CAST(JSON_VALUE(kv,'strict $.id') AS INT) as asset_id,\n    MAX(ts) as max_ts\n  FROM hydradx.traces\n  WHERE track='omniasset'\n  GROUP BY 1\n), A AS\n(\n    SELECT\n      m.asset_id,\n      A1.ticker,\n      A1.decimals,\n      m.max_ts as ts,\n      CAST(JSON_VALUE(t.pv,'strict $.cap') as UINT256) as cap,\n      CAST(JSON_VALUE(t.pv,'strict $.hubReserve') as UINT256) as hubReserve,\n      CAST(JSON_VALUE(t.pv,'strict $.protocolShares') as UINT256) as protocolShares,\n      CAST(JSON_VALUE(t.pv,'strict $.shares') as UINT256) as shares,\n      JSON_VALUE(t.pv, 'strict $.tradable.bits') as tradeable\n    FROM MaxTimestamps m\n    INNER JOIN hydradx.traces t ON m.asset_id = CAST(JSON_VALUE(t.kv,'strict $.id') AS INT) AND m.max_ts = t.ts\n    JOIN query_3482301 A1 on A1.asset_id=m.asset_id\n    WHERE t.track='omniasset'\n)\nSELECT\nasset_id,\nticker,\nround(100.0 * hubReserve / (sum(hubReserve) OVER(ORDER BY 1)), 1) as percentage_of_pool,\n(cap)/POW(10,18) as cap,\nround(hubReserve/POW(10,12)) as hubReserve,\nround(protocolShares/POW(10, decimals)) as protocolShares,\nround(shares/POW(10, decimals)) as shares,\nts as last_update-- when this data was collected\nFROM A\nwhere tradeable='15' -- all bits set to \"on\"\nORDER BY 3 DESC\n\n\n")),(0,i.kt)("p",null,"The query is fairly typical for a parachain query on Dune. It calculates the last available values\nfrom the snapshot table ",(0,i.kt)("inlineCode",{parentName:"p"},"hydradx.traces"),"."),(0,i.kt)("p",null,"The query uses Dune's native UINT256 type extensively, which allows to deal with very large numbers\nand still maintain precision."),(0,i.kt)("p",null,"Query result:"),(0,i.kt)("iframe",{src:"https://dune.com/embeds/3485087/5857870/",height:"350",width:"100%"}),(0,i.kt)("admonition",{title:"DuneSQL Reference",type:"info"},(0,i.kt)("p",{parentName:"admonition"},"For more information on DuneSQL, please refer to the ",(0,i.kt)("a",{parentName:"p",href:"/docs/general/dunesql-cheatsheet"},"DuneSQL Cheatsheet"),"\nand\n",(0,i.kt)("a",{parentName:"p",href:"https://docs.dune.com/query-engine/Functions-and-operators/index"},"DuneSQL Official Documentation"),".")))}m.isMDXComponent=!0}}]);