(self.webpackChunk=self.webpackChunk||[]).push([[4975],{34917:(e,n,t)=>{"use strict";t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>d});var a=t(74848),i=t(28453);t(47379);const o={id:"maintain-guides-how-to-validate-polkadot",title:"Run a Validator (Polkadot)",sidebar_label:"How to run a Validator on Polkadot",description:"The fundamentals for running a Polkadot validator.",keywords:["validator setup","validator","validate","binary","runtime"],slug:"../maintain-guides-how-to-validate-polkadot"},s=void 0,r={id:"maintain/maintain-guides-how-to-validate-polkadot",title:"Run a Validator (Polkadot)",description:"The fundamentals for running a Polkadot validator.",source:"@site/../docs/maintain/maintain-guides-how-to-validate-polkadot.md",sourceDirName:"maintain",slug:"/maintain-guides-how-to-validate-polkadot",permalink:"/docs/maintain-guides-how-to-validate-polkadot",draft:!1,unlisted:!1,editUrl:"https://github.com/w3f/polkadot-wiki/edit/master/docs/maintain/maintain-guides-how-to-validate-polkadot.md",tags:[],version:"current",lastUpdatedBy:"Filippo",lastUpdatedAt:1727167801e3,frontMatter:{id:"maintain-guides-how-to-validate-polkadot",title:"Run a Validator (Polkadot)",sidebar_label:"How to run a Validator on Polkadot",description:"The fundamentals for running a Polkadot validator.",keywords:["validator setup","validator","validate","binary","runtime"],slug:"../maintain-guides-how-to-validate-polkadot"},sidebar:"docs",previous:{title:"Validator Guides",permalink:"/docs/maintain-validator-index"},next:{title:"Validator Payout Overview",permalink:"/docs/maintain-guides-validator-payout"}},l={},d=[{value:"Preliminaries",id:"preliminaries",level:2},{value:"How many DOT do I need to become an active Validator?",id:"how-many-dot-do-i-need-to-become-an-active-validator",level:3},{value:"Initial Set-up",id:"initial-set-up",level:2},{value:"Requirements",id:"requirements",level:3},{value:"Reference Hardware",id:"reference-hardware",level:4},{value:"Install &amp; Configure Network Time Protocol (NTP) Client",id:"install--configure-network-time-protocol-ntp-client",level:3},{value:"Make Sure Landlock is Enabled",id:"make-sure-landlock-is-enabled",level:3},{value:"Installing the Polkadot binaries",id:"installing-the-polkadot-binaries",level:3},{value:"Installation from official releases",id:"installation-from-official-releases",level:4},{value:"Optional: Installation with Package Managers",id:"optional-installation-with-package-managers",level:4},{value:"Debian-based (Debian, Ubuntu)",id:"debian-based-debian-ubuntu",level:4},{value:"RPM-based (Fedora, CentOS)",id:"rpm-based-fedora-centos",level:4},{value:"Optional: Installation with Ansible",id:"optional-installation-with-ansible",level:4},{value:"Optional: Installation with Docker",id:"optional-installation-with-docker",level:4},{value:"Optional: Building the Polkadot binaries from sources",id:"optional-building-the-polkadot-binaries-from-sources",level:3},{value:"Prerequisites: Install Rust and Dependencies",id:"prerequisites-install-rust-and-dependencies",level:4},{value:"Building the binaries",id:"building-the-binaries",level:4},{value:"Verify the installation",id:"verify-the-installation",level:3},{value:"Synchronize Chain Data",id:"synchronize-chain-data",level:3},{value:"Database Snapshot Services",id:"database-snapshot-services",level:4},{value:"Bond DOT",id:"bond-dot",level:2},{value:"Set Session Keys",id:"set-session-keys",level:2},{value:"Generating the Session Keys",id:"generating-the-session-keys",level:3},{value:"Option 1: PolkadotJS-APPS",id:"option-1-polkadotjs-apps",level:4},{value:"Option 2: CLI",id:"option-2-cli",level:4},{value:"Submitting the <code>setKeys</code> Transaction",id:"submitting-the-setkeys-transaction",level:3},{value:"Setting the Node (aka Network) Key",id:"setting-the-node-aka-network-key",level:3},{value:"Validate",id:"validate",level:2},{value:"Setup via Validator Tab",id:"setup-via-validator-tab",level:3},{value:"Thousand Validators Programme",id:"thousand-validators-programme",level:2},{value:"Running a validator on a testnet",id:"running-a-validator-on-a-testnet",level:2},{value:"FAQ",id:"faq",level:2},{value:"Why am I unable to synchronize the chain with 0 peers?",id:"why-am-i-unable-to-synchronize-the-chain-with-0-peers",level:3},{value:"How do I clear all my chain data?",id:"how-do-i-clear-all-my-chain-data",level:3},{value:"Note about VPS",id:"note-about-vps",level:2},{value:"Disable SMT",id:"disable-smt",level:3},{value:"Disable automatic NUMA balancing",id:"disable-automatic-numa-balancing",level:3},{value:"Configure Spectre/Meltdown Mitigations",id:"configure-spectremeltdown-mitigations",level:3},{value:"For Linux &gt;= 5.16",id:"for-linux--516",level:4},{value:"For Linux &lt; 5.16",id:"for-linux--516-1",level:4},{value:"VPS List",id:"vps-list",level:3}];function c(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",del:"del",em:"em",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.admonition,{type:"tip",children:(0,a.jsxs)(n.p,{children:["If you are a beginner, it is recommended that you start your validator journey on Kusama network.\nCheck the ",(0,a.jsx)(n.a,{href:"/docs/maintain-guides-how-to-validate-kusama",children:"Kusama guide"})," for details on how to get\nstarted."]})}),"\n",(0,a.jsx)(n.h2,{id:"preliminaries",children:"Preliminaries"}),"\n",(0,a.jsxs)(n.p,{children:["Running a validator on a live network is a lot of responsibility! You will be accountable for not\nonly your own stake, but also the stake of your current nominators. If you make a mistake and get\n",(0,a.jsx)(n.a,{href:"/docs/learn-offenses",children:"slashed"}),", your tokens and your reputation will be at risk. However,\nrunning a validator can also be very rewarding, knowing that you contribute to the security of a\ndecentralized network while growing your stash."]}),"\n",(0,a.jsxs)(n.admonition,{type:"warning",children:[(0,a.jsx)(n.p,{children:"It is highly recommended that you have significant system administration experience before\nattempting to run your own validator."}),(0,a.jsx)(n.p,{children:"You must be able to handle technical issues and anomalies with your node which you must be able to\ntackle yourself. Being a validator involves more than just executing the Polkadot binary."})]}),"\n",(0,a.jsxs)(n.p,{children:["Since security is so important to running a successful validator, you should take a look at the\n",(0,a.jsx)(n.a,{href:"/docs/maintain-guides-secure-validator",children:"secure validator"})," information to make sure you understand the\nfactors to consider when constructing your infrastructure. As you progress in your journey as a\nvalidator, you will likely want to use this repository as a ",(0,a.jsx)(n.em,{children:"starting point"})," for your own\nmodifications and customizations."]}),"\n",(0,a.jsxs)(n.p,{children:["If you need help, please reach out on the\n",(0,a.jsx)(n.a,{href:"https://matrix.to/#/#polkadotvalidatorlounge:web3.foundation",children:"Polkadot Validator Lounge"})," on\nElement. The team and other validators are there to help answer questions and provide tips from\nexperience."]}),"\n",(0,a.jsx)(n.h3,{id:"how-many-dot-do-i-need-to-become-an-active-validator",children:"How many DOT do I need to become an active Validator?"}),"\n",(0,a.jsxs)(n.p,{children:["You can have a rough estimate on that by using the methods listed\n",(0,a.jsx)(n.a,{href:"../general/faq.md/#what-is-the-minimum-stake-necessary-to-be-elected-as-an-active-validator",children:"here"}),".\nTo be elected into the set, you need a minimum stake behind your validator. This stake can come from\nyourself or from ",(0,a.jsx)(n.a,{href:"/docs/learn-nominator",children:"nominators"}),". This means that as a minimum, you will\nneed enough DOT to set up stash (and optionally a staking\n",(0,a.jsx)(n.a,{href:"/docs/learn-proxies",children:"proxy account"}),") with the existential deposit, plus a little extra for\ntransaction fees. The rest can come from nominators. To understand how validators are elected, check\nthe ",(0,a.jsx)(n.a,{href:"/docs/learn-phragmen",children:"NPoS Election algorithms"})," page."]}),"\n",(0,a.jsxs)(n.p,{children:["For further reference, you may look at the\n",(0,a.jsx)(n.a,{href:"https://polkadot.subscan.io/validator_list?status=validator",children:"statistics for current, active validators"}),".\nFor Kusama see ",(0,a.jsx)(n.a,{href:"https://kusama.subscan.io/validator_list?status=validator",children:"here"}),"."]}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Warning:"})," Any DOT that you stake for your validator is liable to be\n",(0,a.jsx)(n.a,{href:"/docs/learn-offenses",children:"slashed"}),", meaning that an insecure or improper setup may result in loss\nof DOT tokens! If you are not confident in your ability to run a validator node, it is recommended\nto nominate your DOT to a trusted validator node instead."]}),"\n",(0,a.jsx)(n.h2,{id:"initial-set-up",children:"Initial Set-up"}),"\n",(0,a.jsx)(n.h3,{id:"requirements",children:"Requirements"}),"\n",(0,a.jsxs)(n.p,{children:["The most common way for a beginner to run a validator is on a cloud server running Linux. You may\nchoose whatever ",(0,a.jsx)(n.a,{href:"#note-about-vps",children:"VPS"})," provider that you prefer. As OS it is best to use a recent\nDebian Linux. For this guide we will be using ",(0,a.jsx)(n.strong,{children:"Ubuntu 22.04"}),", but the instructions should be\nsimilar for other platforms."]}),"\n",(0,a.jsx)(n.h4,{id:"reference-hardware",children:"Reference Hardware"}),"\n",(0,a.jsxs)(n.p,{children:["The transaction weights in Polkadot are benchmarked on reference hardware. We ran the benchmark on\nVM instances of two major cloud providers: Google Cloud Platform (GCP) and Amazon Web Services\n(AWS). To be specific, we used ",(0,a.jsx)(n.code,{children:"n2-standard-8"})," VM instance on GCP and ",(0,a.jsx)(n.code,{children:"c6i.4xlarge"})," on AWS. It is\nrecommended that the hardware used to run the validators at least matches the specs of the reference\nhardware in order to ensure they are able to process all blocks in time. If you use subpar hardware\nyou will possibly run into performance issues, get less era points, and potentially even get\nslashed."]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"CPU"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"x86-64 compatible;"}),"\n",(0,a.jsx)(n.li,{children:"Intel Ice Lake, or newer (Xeon or Core series); AMD Zen3, or newer (EPYC or Ryzen);"}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.del,{children:"4"})," 8 physical cores @ 3.4GHz; starting with January 2025, the recommendation is to use a\nhardware with at least ",(0,a.jsx)(n.strong,{children:"8"})," physical cores, see\n",(0,a.jsx)(n.a,{href:"https://polkadot.subsquare.io/referenda/1051",children:"referenda"})," for more details about the rationale;"]}),"\n",(0,a.jsx)(n.li,{children:"Simultaneous multithreading disabled (Hyper-Threading on Intel, SMT on AMD);"}),"\n",(0,a.jsxs)(n.li,{children:["Prefer single-threaded performance over higher cores count. A comparison of single-threaded\nperformance can be found ",(0,a.jsx)(n.a,{href:"https://www.cpubenchmark.net/singleThread.html",children:"here"}),"."]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Storage"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["An NVMe SSD of 1 TB (As it should be reasonably sized to deal with blockchain growth). An\nestimation of current chain snapshot sizes can be found\n",(0,a.jsx)(n.a,{href:"https://stakeworld.io/docs/dbsize",children:"here"}),". In general, the latency is more important than the\nthroughput."]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Memory"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"32 GB DDR4 ECC."}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"System"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Linux Kernel 5.16 or newer."}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Network"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"The minimum symmetric networking speed is set to 500 Mbit/s (= 62.5 MB/s). This is required to\nsupport a large number of parachains and allow for proper congestion control in busy network\nsituations."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["The specs posted above are not a ",(0,a.jsx)(n.em,{children:"hard"})," requirement to run a validator, but are considered best\npractice. Running a validator is a responsible task; using professional hardware is a must in any\nway."]}),"\n",(0,a.jsx)(n.h3,{id:"install--configure-network-time-protocol-ntp-client",children:"Install & Configure Network Time Protocol (NTP) Client"}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/Network_Time_Protocol",children:"NTP"})," is a networking protocol designed to\nsynchronize the clocks of computers over a network. NTP allows you to synchronize the clocks of all\nthe systems within the network. Currently it is required that validators' local clocks stay\nreasonably in sync, so you should be running NTP or a similar service. You can check whether you\nhave the NTP client by running:"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.em,{children:"If you are using Ubuntu 18.04 or a newer version, NTP Client should be installed by default."})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:"timedatectl\n"})}),"\n",(0,a.jsxs)(n.p,{children:["If NTP is installed and running, you should see ",(0,a.jsx)(n.code,{children:"System clock synchronized: yes"})," (or a similar\nmessage). If you do not see it, you can install it by executing:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:"sudo apt-get install ntp\n"})}),"\n",(0,a.jsx)(n.p,{children:"ntpd will be started automatically after install. You can query ntpd for status information to\nverify that everything is working:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:"sudo ntpq -p\n"})}),"\n",(0,a.jsx)(n.admonition,{type:"warning",children:(0,a.jsx)(n.p,{children:"Skipping this can result in the validator node missing block authorship opportunities. If the clock\nis out of sync (even by a small amount), the blocks the validator produces may not get accepted by\nthe network."})}),"\n",(0,a.jsx)(n.h3,{id:"make-sure-landlock-is-enabled",children:"Make Sure Landlock is Enabled"}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.a,{href:"https://docs.kernel.org/userspace-api/landlock.html",children:"Landlock"})," is a Linux security feature used in\nPolkadot:"]}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"Landlock empowers any process, including unprivileged ones, to securely restrict themselves."}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"To make use of landlock, make sure you are on the reference kernel version or newer. Most Linux\ndistributions should already have landlock enabled, but you can check by running the following as\nroot:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:"dmesg | grep landlock || journalctl -kg landlock\n"})}),"\n",(0,a.jsxs)(n.p,{children:["If it is not enabled, please see the\n",(0,a.jsx)(n.a,{href:"https://docs.kernel.org/userspace-api/landlock.html#kernel-support",children:'official docs ("Kernel support")'}),"\nif you would like to build Linux with landlock enabled."]}),"\n",(0,a.jsx)(n.h3,{id:"installing-the-polkadot-binaries",children:"Installing the Polkadot binaries"}),"\n",(0,a.jsx)(n.admonition,{title:"Multiple Validator Binaries",type:"info",children:(0,a.jsxs)(n.p,{children:["In addition to the ",(0,a.jsx)(n.code,{children:"polkadot"})," binary, recent changes have separated out functionality into two\nadditional needed binaries, ",(0,a.jsx)(n.code,{children:"polkadot-prepare-worker"}),", and ",(0,a.jsx)(n.code,{children:"polkadot-execute-worker"}),". All three\nbinaries are needed to properly run a validator node. More context on these changes can be found\n",(0,a.jsx)(n.a,{href:"https://github.com/paritytech/polkadot/pull/7337",children:"here"})]})}),"\n",(0,a.jsx)(n.h4,{id:"installation-from-official-releases",children:"Installation from official releases"}),"\n",(0,a.jsxs)(n.p,{children:["The official binaries can be downloaded from the\n",(0,a.jsx)(n.a,{href:"https://github.com/paritytech/polkadot-sdk/releases",children:"Github Releases"}),". You should download the\nlatest available version. You can also download the binaries by using the following direct links\n(replace X.Y.Z by the appropriate version):"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:"https://github.com/paritytech/polkadot-sdk/releases/download/polkadot-vX.Y.Z/polkadot\nhttps://github.com/paritytech/polkadot-sdk/releases/download/polkadot-vX.Y.Z/polkadot-execute-worker\nhttps://github.com/paritytech/polkadot-sdk/releases/download/polkadot-vX.Y.Z/polkadot-prepare-worker\n"})}),"\n",(0,a.jsx)(n.h4,{id:"optional-installation-with-package-managers",children:"Optional: Installation with Package Managers"}),"\n",(0,a.jsxs)(n.p,{children:["The Polkadot Binary in included in ",(0,a.jsx)(n.code,{children:"Debian"})," derivatives (i.e. ",(0,a.jsx)(n.strong,{children:"Debian"}),", ",(0,a.jsx)(n.strong,{children:"Ubuntu"}),") and\n",(0,a.jsx)(n.code,{children:"RPM-based"})," distros (i.e. ",(0,a.jsx)(n.strong,{children:"Fedora"}),", ",(0,a.jsx)(n.strong,{children:"CentOS"}),")."]}),"\n",(0,a.jsx)(n.h4,{id:"debian-based-debian-ubuntu",children:"Debian-based (Debian, Ubuntu)"}),"\n",(0,a.jsx)(n.p,{children:"Run the following commands as the root user:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ssh",children:"# Import the security@parity.io GPG key\ngpg --recv-keys --keyserver hkps://keys.mailvelope.com 9D4B2B6EB8F97156D19669A9FF0812D491B96798\ngpg --export 9D4B2B6EB8F97156D19669A9FF0812D491B96798 > /usr/share/keyrings/parity.gpg\n# Add the Parity repository and update the package index\necho 'deb [signed-by=/usr/share/keyrings/parity.gpg] https://releases.parity.io/deb release main' > /etc/apt/sources.list.d/parity.list\napt update\n# Install the `parity-keyring` package - This will ensure the GPG key\n# used by APT remains up-to-date\napt install parity-keyring\n# Install polkadot\napt install polkadot\n"})}),"\n",(0,a.jsx)(n.h4,{id:"rpm-based-fedora-centos",children:"RPM-based (Fedora, CentOS)"}),"\n",(0,a.jsx)(n.p,{children:"Run the following commands as the root user:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# Install dnf-plugins-core (This might already be installed)\ndnf install dnf-plugins-core\n# Add the repository and enable it\ndnf config-manager --add-repo https://releases.parity.io/rpm/polkadot.repo\ndnf config-manager --set-enabled polkadot\n# Install polkadot (You may have to confirm the import of the GPG key, which\n# should have the following fingerprint: 9D4B2B6EB8F97156D19669A9FF0812D491B96798)\ndnf install polkadot\n"})}),"\n",(0,a.jsx)(n.p,{children:'Make sure you verify the installation (see the "Verify the installation" section).'}),"\n",(0,a.jsxs)(n.admonition,{title:"By default, the Polkadot systemd service is disabled",type:"note",children:[(0,a.jsx)(n.p,{children:"To start the service, run:"}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"sudo systemctl start polkadot.service\n"})})]}),"\n",(0,a.jsx)(n.h4,{id:"optional-installation-with-ansible",children:"Optional: Installation with Ansible"}),"\n",(0,a.jsxs)(n.p,{children:["To manage Polkadot installation with Ansible, you can use the ",(0,a.jsx)(n.strong,{children:"Substrate node role"})," distributed on\nthe ",(0,a.jsx)(n.a,{href:"https://github.com/paritytech/ansible-galaxy/",children:"Parity chain operations Ansible collection"})]}),"\n",(0,a.jsx)(n.h4,{id:"optional-installation-with-docker",children:"Optional: Installation with Docker"}),"\n",(0,a.jsxs)(n.p,{children:["To run Polkadot on a Docker or an OCI compatible container runtime, you can use the official\n",(0,a.jsx)(n.a,{href:"https://hub.docker.com/r/parity/polkadot/tags",children:"parity/polkadot docker image"}),", available on Docker\nHub (replace X.Y.Z by the appropriate version):"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:"docker.io/parity/polkadot:vX.Y.Z\n"})}),"\n",(0,a.jsx)(n.h3,{id:"optional-building-the-polkadot-binaries-from-sources",children:"Optional: Building the Polkadot binaries from sources"}),"\n",(0,a.jsx)(n.h4,{id:"prerequisites-install-rust-and-dependencies",children:"Prerequisites: Install Rust and Dependencies"}),"\n",(0,a.jsx)(n.p,{children:"If you have never installed Rust, you should do this first."}),"\n",(0,a.jsx)(n.p,{children:"If you have already installed Rust, run the following command to make sure you are using the latest\nversion."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:"rustup update\n"})}),"\n",(0,a.jsx)(n.p,{children:"If not, this command will fetch the latest version of Rust and install it."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:"curl https://sh.rustup.rs -sSf | sh -s -- -y\n"})}),"\n",(0,a.jsxs)(n.admonition,{type:"note",children:[(0,a.jsx)(n.p,{children:'If you do not have "curl" installed, run:'}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"sudo apt install curl\n"})}),(0,a.jsxs)(n.p,{children:['It will also be valuable to have "websocat" (Netcat, curl and socat for WebSockets) installed for\nRPC interactions. Installation instructions for various operating systems can be found\n',(0,a.jsx)(n.a,{href:"https://github.com/vi/websocat#installation",children:"here"}),"."]})]}),"\n",(0,a.jsx)(n.p,{children:"To configure your shell, run the following command."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:"source $HOME/.cargo/env\n"})}),"\n",(0,a.jsx)(n.p,{children:"Verify your installation."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:"rustc --version\n"})}),"\n",(0,a.jsx)(n.p,{children:"Finally, run this command to install the necessary dependencies for compiling and running the\nPolkadot node software."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:"sudo apt install make clang pkg-config libssl-dev build-essential\n"})}),"\n",(0,a.jsxs)(n.admonition,{type:"note",children:[(0,a.jsxs)(n.p,{children:["If you are using OSX and you have ",(0,a.jsx)(n.a,{href:"https://brew.sh",children:"Homebrew"})," installed, you can issue the following\nequivalent command INSTEAD of the previous one:"]}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:"brew install cmake pkg-config openssl git llvm\n"})})]}),"\n",(0,a.jsx)(n.h4,{id:"building-the-binaries",children:"Building the binaries"}),"\n",(0,a.jsxs)(n.p,{children:["You can build the Polkadot binaries from the\n",(0,a.jsx)(n.a,{href:"https://github.com/paritytech/polkadot-sdk",children:"paritytech/polkadot-sdk"})," repository on GitHub."]}),"\n",(0,a.jsxs)(n.p,{children:["You should generally use the latest ",(0,a.jsx)(n.strong,{children:"X.Y.Z"}),' tag. You should either review the output from the "git\ntag" command or view the ',(0,a.jsx)(n.a,{href:"https://github.com/paritytech/polkadot-sdk/tags",children:"Polkadot SDK Github tags"}),"\nto see a list of all the available release versions. You should replace ",(0,a.jsx)(n.code,{children:"VERSION"})," below with the\nlatest build (i.e., the highest number)."]}),"\n",(0,a.jsxs)(n.admonition,{type:"note",children:[(0,a.jsx)(n.p,{children:"If you prefer to use SSH rather than HTTPS, you can replace the first line of the below with"}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:"git clone git@github.com:paritytech/polkadot-sdk.git\n"})})]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:"git clone https://github.com/paritytech/polkadot-sdk.git\ncd polkadot-sdk/polkadot\n"})}),"\n",(0,a.jsx)(n.p,{children:"Run the following command to find the latest version."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:"git tag -l | sort -V | grep -v -- '-rc'\n"})}),"\n",(0,a.jsx)(n.p,{children:'Find the latest version; replace "VERSION" in the command below and run to change your branch.'}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:"git checkout VERSION\n"})}),"\n",(0,a.jsxs)(n.p,{children:["Build native code with the production profile. The following will make sure that the binaries are\nall in your ",(0,a.jsx)(n.code,{children:"$PATH"}),"."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:"cargo install --force --path . --profile production\n"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:(0,a.jsx)(n.em,{children:"This step will take a while (generally 10 - 40 minutes, depending on your hardware)."})})}),"\n",(0,a.jsxs)(n.admonition,{title:"Compilation Errors",type:"note",children:[(0,a.jsxs)(n.p,{children:["If you run into compile errors, you may have to pin the version of Rust compiler to the one that was\nused to build the release. Check out ",(0,a.jsx)(n.code,{children:"Rust compiler versions"})," section in the release notes. This can\nbe done by running:"]}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:"rustup install nightly-2022-05-18\nrustup target add wasm32-unknown-unknown --toolchain nightly-2022-05-18\ncargo +nightly-2022-05-18 build --release\n"})}),(0,a.jsx)(n.p,{children:"You may also need to run the build more than once."}),(0,a.jsx)(n.p,{children:"If you would like to execute the tests, run the following command:"}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:"cargo test --all\n"})})]}),"\n",(0,a.jsxs)(n.p,{children:["If you are interested in generating keys locally, you can also install ",(0,a.jsx)(n.code,{children:"subkey"})," from the same\ndirectory. You may then take the generated ",(0,a.jsx)(n.code,{children:"subkey"})," executable and transfer it to an air-gapped\nmachine for extra security."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:"cargo install --force --git https://github.com/paritytech/polkadot-sdk subkey\n"})}),"\n",(0,a.jsx)(n.h3,{id:"verify-the-installation",children:"Verify the installation"}),"\n",(0,a.jsx)(n.p,{children:"After installing Polkadot, you can verify the installation by running"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"polkadot --version\npolkadot-execute-worker --version\npolkadot-prepare-worker --version\n"})}),"\n",(0,a.jsx)(n.p,{children:"It should return something like this (the exact versions don't matter, but they must all be the\nsame):"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"0.9.43-36264cb36db\n0.9.43-36264cb36db\n0.9.43-36264cb36db\n"})}),"\n",(0,a.jsxs)(n.p,{children:["If not, make sure that you installed all the binaries, all the binaries are somewhere in your\n",(0,a.jsx)(n.code,{children:"$PATH"})," and they are all in the same folder."]}),"\n",(0,a.jsx)(n.h3,{id:"synchronize-chain-data",children:"Synchronize Chain Data"}),"\n",(0,a.jsx)(n.p,{children:"You can begin syncing your node by running the following command if you do not want to start in\nvalidator mode right away:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:"polkadot\n"})}),"\n",(0,a.jsxs)(n.admonition,{type:"info",children:[(0,a.jsx)(n.p,{children:"If you want to run a validator on Kusama, you have an option to specify the chain. With no\nspecification, this would default to Polkadot."}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:"polkadot --chain=kusama\n"})})]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"2021-06-17 03:07:07 Parity Polkadot\n2021-06-17 03:07:07 \u270c\ufe0f  version 0.9.5-95f6aa201-x86_64-linux-gnu\n2021-06-17 03:07:07 \u2764\ufe0f  by Parity Technologies <admin@parity.io>, 2017-2021\n2021-06-17 03:07:07 \ud83d\udccb Chain specification: Polkadot\n2021-06-17 03:07:07 \ud83c\udff7 Node name: boiling-pet-7554\n2021-06-17 03:07:07 \ud83d\udc64 Role: FULL\n2021-06-17 03:07:07 \ud83d\udcbe Database: RocksDb at /root/.local/share/polkadot/chains/polkadot/db\n2021-06-17 03:07:07 \u26d3  Native runtime: polkadot-9050 (parity-polkadot-0.tx7.au0)\n2021-06-17 03:07:10 \ud83c\udff7 Local node identity is: 12D3KooWLtXFWf1oGrnxMGmPKPW54xWCHAXHbFh4Eap6KXmxoi9u\n2021-06-17 03:07:10 \ud83d\udce6 Highest known block at #17914\n2021-06-17 03:07:10 \u303d\ufe0f Prometheus server started at 127.0.0.1:9615\n2021-06-17 03:07:10 Listening for new connections on 127.0.0.1:9944.\n"})}),"\n",(0,a.jsx)(n.admonition,{title:"Example of node sync",type:"info",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"2021-06-17 03:07:39 \ud83d\udd0d Discovered new external address for our node: /ip4/10.26.16.1/tcp/30333/ws/p2p/12D3KooWLtXFWf1oGrnxMGmPKPW54xWCHAXHbFh4Eap6KXmxoi9u\n2021-06-17 03:07:40 \u2699\ufe0f  Syncing 218.8 bps, target=#5553764 (17 peers), best: #24034 (0x08af\u2026dcf5), finalized #23552 (0xd4f0\u20262642), \u2b07 173.5kiB/s \u2b06 12.7kiB/s\n2021-06-17 03:07:45 \u2699\ufe0f  Syncing 214.8 bps, target=#5553765 (20 peers), best: #25108 (0xb272\u2026e800), finalized #25088 (0x94e6\u20268a9f), \u2b07 134.3kiB/s \u2b06 7.4kiB/s\n2021-06-17 03:07:50 \u2699\ufe0f  Syncing 214.8 bps, target=#5553766 (21 peers), best: #26182 (0xe7a5\u202601a2), finalized #26112 (0xcc29\u2026b1a9), \u2b07 5.0kiB/s \u2b06 1.1kiB/s\n2021-06-17 03:07:55 \u2699\ufe0f  Syncing 138.4 bps, target=#5553767 (21 peers), best: #26874 (0xcf4b\u20266553), finalized #26624 (0x9dd9\u202627f8), \u2b07 18.9kiB/s \u2b06 2.0kiB/s\n2021-06-17 03:08:00 \u2699\ufe0f  Syncing 37.0 bps, target=#5553768 (22 peers), best: #27059 (0x5b73\u20266fc9), finalized #26624 (0x9dd9\u202627f8), \u2b07 14.3kiB/s \u2b06 4.4kiB/s\n"})})}),"\n",(0,a.jsxs)(n.admonition,{title:"Use Warp sync for faster syncing",type:"tip",children:[(0,a.jsxs)(n.p,{children:["By default, the node performs ",(0,a.jsx)(n.code,{children:"full"})," sync, which downloads and validates the full blockchain\nhistory. Full sync works by listening to announced blocks and requesting the blocks from the\nannouncing peers, or just the block headers in case of light clients."]}),(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.code,{children:"Fast"})," sync is another option that works by downloading the block header history and validating the\nauthority set changes in order to arrive at a specific (usually the most recent) header. After the\ndesired header has been reached and verified, the state can be downloaded and imported. Once this\nprocess has been completed, the node can proceed with a full sync."]}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:"polkadot --sync warp\n"})}),(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.code,{children:"Warp sync"})," initially downloads and validates the finality proofs from\n",(0,a.jsx)(n.a,{href:"/docs/learn-consensus#finality-gadget-grandpa",children:"GRANDPA"})," and then downloads the state of the\nlatest finalized block. After the warp sync, the node is ready to import the latest blocks from the\nnetwork and can be used as a Validator. The blocks from genesis will be downloaded in the\nbackground. Check\n",(0,a.jsx)(n.a,{href:"https://substrate.stackexchange.com/questions/334/what-kinds-of-sync-mechanisms-does-substrate-implement/",children:"this discussion"}),"\nfor more information about the different sync options available."]})]}),"\n",(0,a.jsxs)(n.admonition,{title:"Validators should sync using the RocksDb backend",type:"note",children:[(0,a.jsxs)(n.p,{children:["This is implicit by default, but can be explicit by passing the ",(0,a.jsx)(n.code,{children:"--database RocksDb"})," flag."]}),(0,a.jsxs)(n.p,{children:["In the future, it is recommended to switch to the faster and more efficient ParityDB option. Note\nthat ",(0,a.jsx)(n.strong,{children:"ParityDB is still experimental and should not be used in production."})," If you want to test\nout ParityDB, you can add the flag ",(0,a.jsx)(n.code,{children:"--database paritydb"}),". Switching between database backends will\nrequire a resync."]})]}),"\n",(0,a.jsx)(n.p,{children:"Depending on the size of the chain when you do this, this step may take anywhere from a few minutes\nto a few hours."}),"\n",(0,a.jsxs)(n.p,{children:["If you are interested in determining how much longer you have to go, your server logs (printed to\nSTDOUT from the ",(0,a.jsx)(n.code,{children:"polkadot"})," process) will tell you the latest block your node has processed and\nverified. You can then compare that to the current highest block via\n",(0,a.jsx)(n.a,{href:"https://telemetry.polkadot.io/#list/Polkadot%20CC1",children:"Telemetry"})," or the\n",(0,a.jsx)(n.a,{href:"https://polkadot.js.org/apps/#/explorer",children:"PolkadotJS Block Explorer"}),"."]}),"\n",(0,a.jsx)(n.h4,{id:"database-snapshot-services",children:"Database Snapshot Services"}),"\n",(0,a.jsx)(n.p,{children:"If you start a node for the first time, it will start building from the genesis block. This process\ncan take a while depending on the database size. To make this process faster, snapshots can be used.\nSnapshots are compressed backups of the database directory of Polkadot/Kusama nodes, containing the\nwhole chain (or a pruned version of it, with states only from the latest 1000 or 256 blocks). Listed\nbelow are a few public snapshot providers for Polkadot and Kusama."}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://stakeworld.io/snapshot",children:"Stakeworld"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://polkachu.com/snapshots",children:"Polkachu"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://polkashots.io/",children:"Polkashots"})}),"\n"]}),"\n",(0,a.jsx)(n.admonition,{type:"caution",children:(0,a.jsx)(n.p,{children:"For the security of the network, it is recommended that you sync from scratch, even if you are\nrunning your node in pruning mode for validation. The reason is that if these snapshots get\ncorrupted and a majority of nodes run based on these snapshots, the network could end up running on\na non-canonical chain."})}),"\n",(0,a.jsx)(n.h2,{id:"bond-dot",children:"Bond DOT"}),"\n",(0,a.jsxs)(n.p,{children:["There is a ",(0,a.jsx)(n.a,{href:"/docs/chain-state-values#minimum-validator-bond",children:"minimum bond"})," to start a\nvalidator instance, but to enter the active validator set and be eligible to earn rewards, your\nvalidator node should be nominated by a minimum number of DOT tokens."]}),"\n",(0,a.jsx)(n.p,{children:"If you are validator who intends to get DOT/KSM nominations from the community, you will need to\nshow some skin in the game. For that, you need to bond some DOT/KSM as own stake. Make sure not to\nbond all your DOT balance since you will be unable to pay transaction fees from your bonded balance."}),"\n",(0,a.jsx)(n.admonition,{title:"Controller accounts are deprecated. Use Staking Proxy.",type:"info",children:(0,a.jsxs)(n.p,{children:["Controller accounts are deprecated. For more information, see\n",(0,a.jsx)(n.a,{href:"https://forum.polkadot.network/t/staking-controller-deprecation-plan-staking-ui-leads-comms/2748",children:"this discussion"}),".\nIt is highly recommended that you setup an account with a staking proxy, which can be used for\nissuing start and stop validating calls. Read more about ",(0,a.jsx)(n.a,{href:"/docs/learn-proxies",children:"proxy accounts"}),"\nhere."]})}),"\n",(0,a.jsxs)(n.p,{children:["First, go to the ",(0,a.jsx)(n.a,{href:"https://polkadot.js.org/apps/#/staking/actions",children:"Staking"}),' section. Click on\n"Account Actions", and then the "+ Stash" button.']}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"bonding-JS-UI",src:t(46966).A+"",width:"2143",height:"847"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Stash account"})," - Select your Stash account (which is the account with the DOT/KSM balance)"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Value bonded"})," - How much DOT from the Stash account you want to bond/stake. Note that you do\nnot need to bond all of the DOT in that account. Also note that you can always bond ",(0,a.jsx)(n.em,{children:"more"})," DOT\nlater. However, ",(0,a.jsx)(n.em,{children:"withdrawing"})," any bonded amount requires the duration of the unbonding period. On\nKusama, the unbonding period is 7 days. On Polkadot, the planned unbonding period is 28 days."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Payment destination"})," - The account where the rewards from validating are sent. More info\n",(0,a.jsx)(n.a,{href:"../learn/learn-staking.md/#reward-distribution",children:"here"}),". Starting with runtime version v23 natively\nincluded in client version ",(0,a.jsx)(n.a,{href:"https://github.com/paritytech/polkadot/releases/tag/v0.9.3",children:"0.9.3"}),",\npayouts can go to any custom address. If you'd like to redirect payments to an account that is not\nthe stash account, you can do it by entering the address here. Note that it is extremely unsafe to\nset an exchange address as the recipient of the staking rewards."]}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["Once everything is filled in properly, click ",(0,a.jsx)(n.code,{children:"Bond"})," and sign the transaction with your Stash\naccount."]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"sign transaction",src:t(61021).A+"",width:"2141",height:"780"})}),"\n",(0,a.jsxs)(n.p,{children:["After a few seconds, you should see an ",(0,a.jsx)(n.code,{children:"ExtrinsicSuccess"})," message."]}),"\n",(0,a.jsxs)(n.p,{children:["Your bonded account will be available under ",(0,a.jsx)(n.code,{children:"Stashes"}),". You should now see a new card with all your\naccounts (note: you may need to refresh the screen). The bonded amount on the right corresponds to\nthe funds bonded by the Stash account."]}),"\n",(0,a.jsx)(n.h2,{id:"set-session-keys",children:"Set Session Keys"}),"\n",(0,a.jsx)(n.admonition,{title:"Session keys are consensus critical",type:"caution",children:(0,a.jsxs)(n.p,{children:["If you are not sure if your node has the current session keys that you made the ",(0,a.jsx)(n.code,{children:"setKeys"}),"\ntransaction then you can use one of the two available RPC methods to query your node:\n",(0,a.jsx)(n.a,{href:"https://polkadot.js.org/docs/substrate/rpc/#haskeypublickey-bytes-keytype-text-bool",children:"hasKey"})," to\ncheck for a specific key or\n",(0,a.jsx)(n.a,{href:"https://polkadot.js.org/docs/substrate/rpc/#hassessionkeyssessionkeys-bytes-bool",children:"hasSessionKeys"}),"\nto check the full session key public key string."]})}),"\n",(0,a.jsx)(n.p,{children:"Once your node is fully synced, stop the process by pressing Ctrl-C. At your terminal prompt, you\nwill now start running the node."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:'polkadot --validator --name "name on telemetry"\n'})}),"\n",(0,a.jsx)(n.p,{children:"Similarly:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"2021-06-17 03:12:08 Parity Polkadot\n2021-06-17 03:12:08 \u270c\ufe0f  version 0.9.5-95f6aa201-x86_64-linux-gnu\n2021-06-17 03:12:08 \u2764\ufe0f  by Parity Technologies <admin@parity.io>, 2017-2021\n2021-06-17 03:12:08 \ud83d\udccb Chain specification: Polkadot\n2021-06-17 03:12:08 \ud83c\udff7 Node name: nateched-test\n2021-06-17 03:12:08 \ud83d\udc64 Role: AUTHORITY\n2021-06-17 03:12:08 \ud83d\udcbe Database: RocksDb at /root/.local/share/polkadot/chains/polkadot/db\n2021-06-17 03:12:08 \u26d3  Native runtime: polkadot-9050 (parity-polkadot-0.tx7.au0)\n2021-06-17 03:12:12 \ud83c\udff7 Local node identity is: 12D3KooWLtXFWf1oGrnxMGmPKPW54xWCHAXHbFh4Eap6KXmxoi9u\n2021-06-17 03:12:12 \ud83d\udce6 Highest known block at #64673\n2021-06-17 03:12:12 \u303d\ufe0f Prometheus server started at 127.0.0.1:9615\n2021-06-17 03:12:12 Listening for new connections on 127.0.0.1:9944.\n2021-06-17 03:12:12 \ud83d\udc76 Starting BABE Authorship worker\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"2021-06-17 03:12:16 \ud83d\udd0d Discovered new external address for our node: /ip4/10.26.11.1/tcp/30333/p2p/12D3KooWLtXFWf1oGrnxMGmPKPW54xWCHAXHbFh4Eap6KXmxoi9u\n2021-06-17 03:12:17 \u2699\ufe0f  Syncing, target=#5553810 (14 peers), best: #65068 (0x6da5\u20260662), finalized #65024 (0x4e84\u2026d170), \u2b07 352.2kiB/s \u2b06 75.6kiB/s\n"})}),"\n",(0,a.jsx)(n.p,{children:"You can give your validator any name that you like, but note that others will be able to see it, and\nit will be included in the list of all servers using the same telemetry server. Since numerous\npeople are using telemetry, it is recommended that you choose something likely to be unique."}),"\n",(0,a.jsx)(n.h3,{id:"generating-the-session-keys",children:"Generating the Session Keys"}),"\n",(0,a.jsx)(n.p,{children:"You need to tell the chain your Session keys by signing and submitting an extrinsic. This is what\nassociates your validator node with your stash account on Polkadot."}),"\n",(0,a.jsx)(n.h4,{id:"option-1-polkadotjs-apps",children:"Option 1: PolkadotJS-APPS"}),"\n",(0,a.jsxs)(n.p,{children:["You can generate your ",(0,a.jsx)(n.a,{href:"/docs/learn-cryptography",children:"Session keys"})," in the client via the apps RPC.\nIf you are doing this, make sure that you have the PolkadotJS-Apps explorer attached to your\nvalidator node. You can configure the apps dashboard to connect to the endpoint of your validator in\nthe Settings tab. If you are connected to a default endpoint hosted by Parity of Web3 Foundation,\nyou will not be able to use this method since making RPC requests to this node would effect the\nlocal keystore hosted on a ",(0,a.jsx)(n.em,{children:"public node"})," and you want to make sure you are interacting with the\nkeystore for ",(0,a.jsx)(n.em,{children:"your node"}),"."]}),"\n",(0,a.jsxs)(n.p,{children:["Once ensuring that you have connected to your node, the easiest way to set session keys for your\nnode is by calling the ",(0,a.jsx)(n.code,{children:"author_rotateKeys"})," RPC request to create new keys in your validator's\nkeystore. Navigate to Toolbox tab and select RPC Calls then select the author > rotateKeys() option\nand remember to save the output that you get back for a later step."]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"Explorer RPC call",src:t(3106).A+"",width:"1700",height:"582"})}),"\n",(0,a.jsx)(n.h4,{id:"option-2-cli",children:"Option 2: CLI"}),"\n",(0,a.jsx)(n.p,{children:"If you are on a remote server, it is easier to run this command on the same machine (while the node\nis running with the default WS RPC port configured):"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:'curl -H "Content-Type: application/json" -d \'{"id":1, "jsonrpc":"2.0", "method": "author_rotateKeys", "params":[]}\' http://localhost:9944\n'})}),"\n",(0,a.jsx)(n.p,{children:'The output will have a hex-encoded "result" field. The result is the concatenation of the four\npublic keys. Save this result for a later step.'}),"\n",(0,a.jsx)(n.p,{children:"You can restart your node at this point."}),"\n",(0,a.jsxs)(n.h3,{id:"submitting-the-setkeys-transaction",children:["Submitting the ",(0,a.jsx)(n.code,{children:"setKeys"})," Transaction"]}),"\n",(0,a.jsx)(n.p,{children:"You need to tell the chain your Session keys by signing and submitting an extrinsic. This is what\nassociates your validator with your staking proxy."}),"\n",(0,a.jsxs)(n.p,{children:["Go to ",(0,a.jsx)(n.a,{href:"https://polkadot.js.org/apps/#/staking/actions",children:"Staking > Account Actions"}),', and click "Set\nSession Key" on the bonding account you generated earlier. Enter the output from ',(0,a.jsx)(n.code,{children:"author_rotateKeys"}),'\nin the field and click "Set Session Key".']}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.img,{alt:"staking-change-session",src:t(83215).A+"",width:"2792",height:"182"}),"\n",(0,a.jsx)(n.img,{alt:"staking-session-result",src:t(61748).A+"",width:"2146",height:"680"})]}),"\n",(0,a.jsx)(n.p,{children:"Submit this extrinsic and you are now ready to start validating."}),"\n",(0,a.jsx)(n.h3,{id:"setting-the-node-aka-network-key",children:"Setting the Node (aka Network) Key"}),"\n",(0,a.jsx)(n.p,{children:"Validators must use a static network key to maintain a stable node identity across restarts.\nStarting with Polkadot version 1.11, a check is performed on startup, and the following error will\nbe printed if a static node key is not set:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:'Error:\n0: Starting an authority without network key\nThis is not a safe operation because other authorities in the network may depend on your node having a stable identity.\nOtherwise these other authorities may not being able to reach you.\n\nIf it is the first time running your node you could use one of the following methods:\n1. [Preferred] Separately generate the key with: <NODE_BINARY> key generate-node-key --base-path <YOUR_BASE_PATH>\n2. [Preferred] Separately generate the key with: <NODE_BINARY> key generate-node-key --file <YOUR_PATH_TO_NODE_KEY>\n3. [Preferred] Separately generate the key with: <NODE_BINARY> key generate-node-key --default-base-path\n4. [Unsafe] Pass --unsafe-force-node-key-generation and make sure you remove it for subsequent node restarts"\n'})}),"\n",(0,a.jsxs)(n.p,{children:["The recommended solution is to generate a node key and save it to a file using\n",(0,a.jsx)(n.code,{children:"polkadot key generate-node-key --file <PATH_TO_NODE_KEY>"}),", then attach it to your node with\n",(0,a.jsx)(n.code,{children:"--node-key-file <PATH_TO_NODE_KEY>"}),"."]}),"\n",(0,a.jsxs)(n.p,{children:["Please see ",(0,a.jsx)(n.a,{href:"https://github.com/paritytech/polkadot-sdk/pull/3852",children:"polkadot-sdk#3852"})," for the\nrationale behind this change."]}),"\n",(0,a.jsx)(n.h2,{id:"validate",children:"Validate"}),"\n",(0,a.jsxs)(n.p,{children:["To verify that your node is live and synchronized, head to\n",(0,a.jsx)(n.a,{href:"https://telemetry.polkadot.io/#list/Polkadot%20CC1",children:"Telemetry"})," and find your node. Note that this\nwill show all nodes on the Polkadot network, which is why it is important to select a unique name!"]}),"\n",(0,a.jsxs)(n.p,{children:["In this example, we used the name ",(0,a.jsx)(n.code,{children:"techedtest"})," and have successfully located it upon searching:"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"polkadot-dashboard-telemetry",src:t(83517).A+"",width:"2862",height:"472"})}),"\n",(0,a.jsx)(n.h3,{id:"setup-via-validator-tab",children:"Setup via Validator Tab"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"polkadot-dashboard-validate-1",src:t(47526).A+"",width:"2128",height:"1022"})}),"\n",(0,a.jsxs)(n.p,{children:["Here you will need to input the Keys from ",(0,a.jsx)(n.code,{children:"rotateKeys"}),", which is the Hex output from\n",(0,a.jsx)(n.code,{children:"author_rotateKeys"}),". The keys will show as pending until applied at the start of a new session."]}),"\n",(0,a.jsx)(n.p,{children:'The "reward commission percentage" is the commission percentage that you can declare against your\nvalidator\'s rewards. This is the rate that your validator will be commissioned with.'}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Payment preferences"})," - You can specify the percentage of the rewards that will get paid to you.\nThe remaining will be split among your nominators."]}),"\n"]}),"\n",(0,a.jsx)(n.admonition,{title:"Setting a commission rate of 100% suggests that you do not want your validator to receive",type:"caution",children:(0,a.jsx)(n.p,{children:"nominations"})}),"\n",(0,a.jsx)(n.p,{children:'You can also determine if you would like to receive nominations with the "allows new nominations"\noption.'}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"dashboard validate",src:t(28733).A+"",width:"2126",height:"694"})}),"\n",(0,a.jsx)(n.p,{children:'Click "Bond & Validate".'}),"\n",(0,a.jsx)(n.p,{children:'If you go to the "Staking" tab, you will see a list of active validators currently running on the\nnetwork. At the top of the page, it shows the number of validator slots that are available as well\nas the number of nodes that have signaled their intention to be a validator. You can go to the\n"Waiting" tab to double check to see whether your node is listed there.'}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"staking queue",src:t(72563).A+"",width:"2838",height:"1440"})}),"\n",(0,a.jsxs)(n.p,{children:["The validator set is refreshed every era. In the next era, if there is a slot available and your\nnode is selected to join the validator set, your node will become an active validator. Until then,\nit will remain in the ",(0,a.jsx)(n.em,{children:"waiting"})," queue. If your validator is not selected to become part of the\nvalidator set, it will remain in the ",(0,a.jsx)(n.em,{children:"waiting"})," queue until it is. There is no need to re-start if\nyou are not selected for the validator set in a particular era. However, it may be necessary to\nincrease the number of DOT staked or seek out nominators for your validator in order to join the\nvalidator set."]}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Congratulations!"})," If you have followed all of these steps, and been selected to be a part of the\nvalidator set, you are now running a Polkadot validator! If you need help, reach out on the\n",(0,a.jsx)(n.a,{href:"https://matrix.to/#/!NZrbtteFeqYKCUGQtr:matrix.parity.io?via=matrix.parity.io&via=matrix.org&via=web3.foundation",children:"Polkadot Validator chat"}),"."]}),"\n",(0,a.jsx)(n.h2,{id:"thousand-validators-programme",children:"Thousand Validators Programme"}),"\n",(0,a.jsxs)(n.p,{children:["The Thousand Validators Programme is a joint initiative by Web3 Foundation and Parity Technologies\nto provide support for community validators. If you are interested in applying for the program, you\ncan find more information ",(0,a.jsx)(n.a,{href:"/docs/thousand-validators",children:"on the wiki page"}),"."]}),"\n",(0,a.jsx)(n.h2,{id:"running-a-validator-on-a-testnet",children:"Running a validator on a testnet"}),"\n",(0,a.jsx)(n.p,{children:"To verify your validator setup, it is possible to run it against a PoS test network such as Westend.\nHowever, validator slots are intentionally limited on Westend to ensure stability and availability\nof the testnet for the Polkadot release process."}),"\n",(0,a.jsx)(n.p,{children:"Here is a small comparison of each network characteristics as relevant to validators:"}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Network"}),(0,a.jsx)(n.th,{children:"Polkadot"}),(0,a.jsx)(n.th,{children:"Westend"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"epoch"}),(0,a.jsx)(n.td,{children:"4h"}),(0,a.jsx)(n.td,{children:"1h"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"era"}),(0,a.jsx)(n.td,{children:"1d"}),(0,a.jsx)(n.td,{children:"6h"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"token"}),(0,a.jsx)(n.td,{children:"DOT"}),(0,a.jsx)(n.td,{children:"WND (test)"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"active validators"}),(0,a.jsx)(n.td,{children:"~300"}),(0,a.jsx)(n.td,{children:"~20"})]})]})]}),"\n",(0,a.jsx)(n.h2,{id:"faq",children:"FAQ"}),"\n",(0,a.jsx)(n.h3,{id:"why-am-i-unable-to-synchronize-the-chain-with-0-peers",children:"Why am I unable to synchronize the chain with 0 peers?"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"zero-peer",src:t(39664).A+"",width:"1350",height:"235"})}),"\n",(0,a.jsxs)(n.p,{children:["Make sure to enable ",(0,a.jsx)(n.code,{children:"30333"})," libp2p port. Eventually, it will take a little bit of time to discover\nother peers over the network."]}),"\n",(0,a.jsx)(n.h3,{id:"how-do-i-clear-all-my-chain-data",children:"How do I clear all my chain data?"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:"polkadot purge-chain\n"})}),"\n",(0,a.jsx)(n.admonition,{type:"info",children:(0,a.jsxs)(n.p,{children:["Check out the ",(0,a.jsx)(n.a,{href:"https://substrate.stackexchange.com/",children:"Substrate StackExchange"})," to quickly get the\nanswers you need."]})}),"\n",(0,a.jsx)(n.h2,{id:"note-about-vps",children:"Note about VPS"}),"\n",(0,a.jsx)(n.p,{children:"VPS providers are very popular for running servers of any kind. Extensive benchmarking was conducted\nto ensure that VPS servers are able to keep up with the work load in general."}),"\n",(0,a.jsxs)(n.admonition,{type:"note",children:[(0,a.jsx)(n.p,{children:"Before you run a live Validator, please verify if the advertised performance is actually delivered\nconsistently by the VPS provider."}),(0,a.jsx)(n.p,{children:"::: The following server types showed acceptable performance during the benchmark tests. Please note\nthat this is not an endorsement in any way:"}),(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["GCP's ",(0,a.jsx)(n.em,{children:"c2"})," and ",(0,a.jsx)(n.em,{children:"c2d"})," machine families"]}),"\n",(0,a.jsxs)(n.li,{children:["AWS's ",(0,a.jsx)(n.em,{children:"c6id"})," machine family"]}),"\n"]}),(0,a.jsx)(n.p,{children:"The following additional configurations were applied to the instances to tune their performance:"}),(0,a.jsxs)(n.h3,{id:"disable-smt",children:["Disable ",(0,a.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/Simultaneous_multithreading",children:"SMT"})]}),(0,a.jsxs)(n.p,{children:["As critical path of Substrate is single-threaded we need to optimize for single-core CPU\nperformance. The node still profits from multiple cores when doing networking and other non-runtime\noperations. It is therefore still necessary to run it on at least the minimum required number of\ncores. Disabling SMT improves the performance as each vCPU becomes mapped to a physical CPU core\nrather than being presented to the OS as two logical cores. SMT implementation is called\n",(0,a.jsx)(n.em,{children:"Hyper-Threading"})," on Intel and ",(0,a.jsx)(n.em,{children:"2-way SMT"})," on AMD Zen. To disable SMT in runtime:"]}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"for cpunum in $(cat /sys/devices/system/cpu/cpu*/topology/thread_siblings_list | cut -s -d, -f2- | tr ',' '\\n' | sort -un)\ndo\n  echo 0 > /sys/devices/system/cpu/cpu$cpunum/online\ndone\n"})}),(0,a.jsx)(n.p,{children:"It will disable every other (vCPU) core."}),(0,a.jsxs)(n.p,{children:["To save changes permanently add ",(0,a.jsx)(n.code,{children:"nosmt=force"})," as kernel parameter. Edit ",(0,a.jsx)(n.code,{children:"/etc/default/grub"})," and add\n",(0,a.jsx)(n.code,{children:"nosmt=force"})," to ",(0,a.jsx)(n.code,{children:"GRUB_CMDLINE_LINUX_DEFAULT"})," variable and run ",(0,a.jsx)(n.code,{children:"sudo update-grub"}),". After the reboot\nyou should see half of the cores are offline. Run ",(0,a.jsx)(n.code,{children:"lscpu --extended"})," to confirm."]}),(0,a.jsx)(n.h3,{id:"disable-automatic-numa-balancing",children:"Disable automatic NUMA balancing"}),(0,a.jsx)(n.p,{children:"If you have multiple physical CPUs (CPU0 and CPU1) in the system each with its own memory bank (MB0\nand MB1), then it is usually slower for a CPU0 to access MB1 due to the slower interconnection. To\nprevent the OS from automatically moving the running Substrate process from one CPU to another and\nthus causing an increased latency, it is recommended to disable automatic NUMA balancing."}),(0,a.jsx)(n.p,{children:"With automatic NUMA balancing disabled, an OS will always run a process on the same NUMA node where\nit was initially scheduled."}),(0,a.jsx)(n.p,{children:"To disable NUMA balancing in runtime:"}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"sysctl kernel.numa_balancing=0\n"})}),(0,a.jsxs)(n.p,{children:["To save changes permanently, update startup options and reconfigure GRUB. Edit ",(0,a.jsx)(n.code,{children:"/etc/default/grub"}),"\nand add ",(0,a.jsx)(n.code,{children:"numa_balancing=disable"})," to ",(0,a.jsx)(n.code,{children:"GRUB_CMDLINE_LINUX_DEFAULT"})," variable and run\n",(0,a.jsx)(n.code,{children:"sudo update-grub"}),". After reboot you can confirm the change by running\n",(0,a.jsx)(n.code,{children:"sysctl -a | grep 'kernel.numa_balancing'"})," and checking if the parameter is set to 0"]}),(0,a.jsx)(n.h3,{id:"configure-spectremeltdown-mitigations",children:"Configure Spectre/Meltdown Mitigations"}),(0,a.jsxs)(n.p,{children:["Spectre and Meltdown are vulnerabilities discovered in modern CPUs a few years ago. Mitigations were\nmade to the Linux kernel to cope with the multiple variations of these attacks. Check out\n",(0,a.jsx)(n.a,{href:"https://meltdownattack.com/",children:"https://meltdownattack.com/"})," for more info."]}),(0,a.jsxs)(n.p,{children:["Initially those mitigations added ~20% penalty to the performance of the workloads. As CPU\nmanufacturers started to roll-out mitigations implemented in hardware, the performance gap\n",(0,a.jsx)(n.a,{href:"https://www.phoronix.com/scan.php?page=article&item=3-years-specmelt&num=1",children:"narrowed down"}),". As the\nbenchmark demonstrates, the performance penalty got reduced to ~7% on Intel 10th Gen CPUs. This is\ntrue for the workloads running on both bare-metal and VMs. But the penalty remains high for the\ncontainerized workloads in some cases."]}),(0,a.jsxs)(n.p,{children:["As demonstrated in\n",(0,a.jsx)(n.a,{href:"http://mamememo.blogspot.com/2020/05/cpu-intensive-rubypython-code-runs.html",children:"Yusuke Endoh's article"}),",\na performance penalty for containerized workloads can be as high as 100%. This is due to SECCOMP\nprofile being overprotective about applying Spectre/Meltdown mitigations without providing real\nsecurity. A longer explanation is available in the\n",(0,a.jsx)(n.a,{href:"https://lkml.org/lkml/2020/11/4/1135",children:"kernel patch discussion"}),"."]}),(0,a.jsxs)(n.p,{children:["Linux 5.16\n",(0,a.jsx)(n.a,{href:"https://www.phoronix.com/scan.php?page=news_item&px=Linux-Spectre-SECCOMP-Default",children:"loosened the protections"}),"\napplied to SECCOMP threads by default. Containers running on kernel 5.16 and later now don't suffer\nfrom the performance penalty implied by using a SECCOMP profile in container runtimes."]}),(0,a.jsx)(n.h4,{id:"for-linux--516",children:"For Linux >= 5.16"}),(0,a.jsx)(n.p,{children:"You are all set. The performance of containerized workloads is on par with non-containerized ones.\nYou don't have to do anything."}),(0,a.jsx)(n.h4,{id:"for-linux--516-1",children:"For Linux < 5.16"}),(0,a.jsxs)(n.p,{children:["You'll need to disable mitigations for Spectre V2 for user-space tasks as well as Speculative Store\nBypass Disable (SSBD) for Spectre V4.\n",(0,a.jsx)(n.a,{href:"https://git.kernel.org/pub/scm/linux/kernel/git/kees/linux.git/commit/?h=for-next/seccomp&id=2f46993d83ff4abb310ef7b4beced56ba96f0d9d",children:"This patch message"}),"\ndescribes the reasoning for this default change in more detail:"]}),(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"Ultimately setting SSBD and STIBP by default for all seccomp jails is a bad sweet spot and bad\ndefault with more cons than pros that end up reducing security in the public cloud (by giving an\nhuge incentive to not expose SPEC_CTRL which would be needed to get full security with IBPB after\nsetting nosmt in the guest) and by excessively hurting performance to more secure apps using\nseccomp that end up having to opt out with SECCOMP_FILTER_FLAG_SPEC_ALLOW."}),"\n"]}),(0,a.jsxs)(n.p,{children:["To disable the mitigations edit ",(0,a.jsx)(n.code,{children:"/etc/default/grub"})," and add\n",(0,a.jsx)(n.code,{children:"spec_store_bypass_disable=prctl spectre_v2_user=prctl"})," to ",(0,a.jsx)(n.code,{children:"GRUB_CMDLINE_LINUX_DEFAULT"})," variable,\nrun ",(0,a.jsx)(n.code,{children:"sudo update-grub"}),", then reboot."]}),(0,a.jsxs)(n.p,{children:["Note that mitigations are not disabled completely. You can fully disable all the available kernel\nmitigations by setting ",(0,a.jsx)(n.code,{children:"mitigations=off"}),". But we don't recommend doing this unless you run a fully\ntrusted code on the host."]}),(0,a.jsx)(n.h3,{id:"vps-list",children:"VPS List"}),(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://cloud.google.com/",children:"Google Cloud"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://aws.amazon.com/",children:"Amazon AWS"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://www.ovh.com.au/",children:"OVH"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://www.digitalocean.com/",children:"Digital Ocean"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://www.vultr.com/",children:"Vultr"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://www.linode.com/",children:"Linode"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://www.scaleway.com/",children:"Scaleway"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://onfinality.io/",children:"OnFinality"})}),"\n"]}),(0,a.jsxs)(n.admonition,{type:"caution",children:[(0,a.jsxs)(n.mdxAdmonitionTitle,{children:["Beware of the ",(0,a.jsx)(n.strong,{children:"Terms and Conditions"})," and ",(0,a.jsx)(n.strong,{children:"Acceptable Use Policies"})," for each VPS"]}),(0,a.jsx)(n.p,{children:"provider"}),(0,a.jsxs)(n.p,{children:['You may be locked out of your account and your server shut down if you come in violation. For\ninstance, Digital Ocean lists "Mining of Cryptocurrencies" under the Network Abuse section of their\n',(0,a.jsx)(n.a,{href:"https://www.digitalocean.com/legal/acceptable-use-policy/",children:"Acceptable Use Policy"})," and requires\nexplicit permission to do so. This may extend to other cryptocurrency activity."]})]})]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},47379:(e,n,t)=>{"use strict";t.d(n,{A:()=>u});var a=t(90675),i=t(10467),o=t(96540),s=t(69761),r=t(84393),l=t(11135);function d(e,n,t){return c.apply(this,arguments)}function c(){return(c=(0,i.A)((0,a.A)().mark((function e(n,t,i){var o,l,d,c,h;return(0,a.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=void 0,l=void 0,e.t0=n,e.next="polkadot"===e.t0?5:"kusama"===e.t0?7:"statemine"===e.t0?9:"statemint"===e.t0?11:"polkadotpeople"===e.t0?13:"kusamapeople"===e.t0?15:17;break;case 5:return o="wss://rpc.polkadot.io",e.abrupt("break",18);case 7:return o="wss://kusama-rpc.polkadot.io/",e.abrupt("break",18);case 9:return o="wss://statemine-rpc.polkadot.io/",e.abrupt("break",18);case 11:return o="wss://statemint-rpc.polkadot.io/",e.abrupt("break",18);case 13:return o="wss://polkadot-people-rpc.polkadot.io/",e.abrupt("break",18);case 15:return o="wss://kusama-people-rpc.polkadot.io/",e.abrupt("break",18);case 17:console.log("Unknown socket url provided, no connection made.");case 18:if(void 0!==o){e.next=22;break}return e.abrupt("return");case 22:return d=new s.E(o),e.next=25,r.G.create({provider:d});case 25:c=e.sent,(h=t.split(".")).forEach((function(e){e in c&&(c=c[e])})),e.t1=h[0],e.next="consts"===e.t1?31:"query"===e.t1?33:38;break;case 31:return l=c.toString(),e.abrupt("break",39);case 33:return e.next=35,c();case 35:return l=(l=e.sent).toString(),e.abrupt("break",39);case 38:console.log("Unknown path prefix ("+h[0]+") in "+t);case 39:return e.abrupt("return",l);case 40:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e,n,t,a){switch(n){case"humanReadable":(0,l.HumanReadable)(e,t,a);break;case"precise":(0,l.Precise)(e,t,a);break;case"blocksToDays":(0,l.BlocksToDays)(e,a);break;case"erasToDays":(0,l.ErasToDays)(e,a,t);break;case"percentage":(0,l.Percentage)(e,a);break;case"permillToPercent":(0,l.PermillToPercent)(e,a);break;case"arrayLength":(0,l.ArrayLength)(e,a);break;default:return void console.log("Ignoring unknown filter type")}}const u=function(e){var n=e.network,t=e.path,s=e.defaultValue,r=e.filter,l=void 0===r?void 0:r,c=(0,o.useState)(""),u=c[0],p=c[1];return n=n.toLowerCase(),(0,o.useEffect)((function(){void 0!==l?h(s.toString(),l,n,p):p(s.toString());var e=void 0;switch(n){case"polkadot":e="wss://rpc.polkadot.io";break;case"kusama":e="wss://kusama-rpc.polkadot.io/";break;case"statemine":e="wss://kusama-asset-hub-rpc.polkadot.io/";break;case"statemint":e="wss://polkadot-asset-hub-rpc.polkadot.io/";break;case"kusamapeople":e="wss://kusama-people-rpc.polkadot.io";break;case"polkadotpeople":e="wss://polkadot-people-rpc.polkadot.io";break;default:console.log("Unknown network provided, "+n)}if(void 0===e)console.log("Failed to connect to a valid websocket, applying default");else{var o=function(){var e=(0,i.A)((0,a.A)().mark((function e(){var i;return(0,a.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(n,t,p);case 2:if(void 0!==(i=e.sent)){e.next=7;break}return e.abrupt("return");case 7:void 0!==l?h(i,l,n,p):p(i);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();try{o()}catch(r){console.log(r)}}}),[]),u}},11135:e=>{var n="polkadot",t="kusama",a="statemine",i="statemint",o="polkadotpeople",s="kusamapeople",r={polkadot:{precision:1e10,symbol:"DOT"},kusama:{precision:1e12,symbol:"KSM"},statemint:{precision:1e10,symbol:"DOT"},statemine:{precision:1e12,symbol:"KSM"},polkadotpeople:{precision:1e10,symbol:"DOT"},kusamapeople:{precision:1e12,symbol:"KSM"}};e.exports={HumanReadable:function(e,l,d){var c=void 0;if(l===n||l===i)c=3;else if(l===t||l===a||l===o)c=6;else{if(l!=s)return void console.log("Unknown network type found when attempting to apply 'Human Readable' filter");c=8}e=parseFloat(e),d((e=Number.isInteger(e/r[l].precision)?e/r[l].precision+" "+r[l].symbol:(e/r[l].precision).toFixed(c)+" "+r[l].symbol).toString())},Precise:function(e,n,t){t(e=(e=parseFloat(e))/r[n].precision+" "+r[n].symbol)},BlocksToDays:function(e,n){n((e=6*e/86400).toString())},ErasToDays:function(e,r,l){var d=void 0;if(l===n||l===i||l==o)d=1;else{if(l!==t&&l!==a&&l!=s)return void console.log("Unknown network type found when attempting to apply 'Human Readable' filter");d=4}r((e/=d).toString())},Percentage:function(e,n){n((e/=1e7).toString())},PermillToPercent:function(e,n){n((e/=1e4).toString())},ArrayLength:function(e,n){n((e=e.split(",").length).toString())}}},46966:(e,n,t)=>{"use strict";t.d(n,{A:()=>a});const a=t.p+"assets/images/JS-UI-bond-7bdecad8831f3c1b20d96e426e7e47c1.png"},61021:(e,n,t)=>{"use strict";t.d(n,{A:()=>a});const a=t.p+"assets/images/JS-UI-sign-transaction-75b2e29fcaecc44c5eb1c4f5e3e364ae.png"},72563:(e,n,t)=>{"use strict";t.d(n,{A:()=>a});const a=t.p+"assets/images/polkadot-dashboard-staking-4005504ef30291ebe1a243298c351a34.png"},83517:(e,n,t)=>{"use strict";t.d(n,{A:()=>a});const a=t.p+"assets/images/polkadot-dashboard-telemetry-8930bdd60309c864ed682a1bdd4b1e31.png"},47526:(e,n,t)=>{"use strict";t.d(n,{A:()=>a});const a=t.p+"assets/images/polkadot-dashboard-validate-1-4bf6a6488b4e128d12cab2617025d796.png"},28733:(e,n,t)=>{"use strict";t.d(n,{A:()=>a});const a=t.p+"assets/images/polkadot-dashboard-validate-2-18a8869804f89ffebafa1b920e31ccd6.png"},3106:(e,n,t)=>{"use strict";t.d(n,{A:()=>a});const a=t.p+"assets/images/polkadot-explorer-rotatekeys-rpc-6d5ba5d9ffb20fd9683432e9a6ccd0f9.jpg"},39664:(e,n,t)=>{"use strict";t.d(n,{A:()=>a});const a=t.p+"assets/images/polkadot-zero-peer-2642d52b7e07893a66a0ddfd492cce38.jpg"},83215:(e,n,t)=>{"use strict";t.d(n,{A:()=>a});const a=t.p+"assets/images/set-session-key-1-b0cdb38a299d6ef6bcc24c6ab2bce66d.png"},61748:(e,n,t)=>{"use strict";t.d(n,{A:()=>a});const a=t.p+"assets/images/set-session-key-2-408efe22daa8d6533715987a1099828a.png"},47790:()=>{}}]);