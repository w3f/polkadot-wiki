"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6225],{15680:(e,t,n)=>{n.d(t,{xA:()=>d,yg:()=>h});var o=n(96540);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=o.createContext({}),p=function(e){var t=o.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},d=function(e){var t=p(e.components);return o.createElement(l.Provider,{value:t},e.children)},u="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},m=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,l=e.parentName,d=r(e,["components","mdxType","originalType","parentName"]),u=p(n),m=a,h=u["".concat(l,".").concat(m)]||u[m]||c[m]||i;return n?o.createElement(h,s(s({ref:t},d),{},{components:n})):o.createElement(h,s({ref:t},d))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,s=new Array(i);s[0]=m;var r={};for(var l in t)hasOwnProperty.call(t,l)&&(r[l]=t[l]);r.originalType=e,r[u]="string"==typeof e?e:a,s[1]=r;for(var p=2;p<i;p++)s[p]=n[p];return o.createElement.apply(null,s)}return o.createElement.apply(null,n)}m.displayName="MDXCreateElement"},67141:(e,t,n)=>{n.d(t,{A:()=>a});var o=n(96540);const a=function(e){var t,n=e.message,a=(0,o.useState)(!0),i=a[0],s=a[1];return o.createElement(o.Fragment,null,i&&o.createElement("div",{className:"message-box"},o.createElement("button",{className:"close-button",onClick:function(){s(!1)}},"\u2716 "),o.createElement("div",{className:"message-content",dangerouslySetInnerHTML:{__html:(t=n,t.replace(/\[(.*?)\]\((.*?)\)/g,'<a href="$2">$1</a>'))}})))}},59831:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>p,default:()=>g,frontMatter:()=>l,metadata:()=>d,toc:()=>c});var o=n(58168),a=n(98587),i=(n(96540),n(15680)),s=n(67141),r=["components"],l={id:"learn-guides-asset-conversion",title:"Asset Conversion Tutorials",sidebar_label:"Asset Conversion Tutorials",description:"Asset Conversion implementation details on AssetHub.",keywords:["Assets","DEX","Exchange","Pools","Tokens"],slug:"../learn-guides-asset-conversion"},p=void 0,d={unversionedId:"learn/learn-guides-asset-conversion",id:"learn/learn-guides-asset-conversion",title:"Asset Conversion Tutorials",description:"Asset Conversion implementation details on AssetHub.",source:"@site/../docs/learn/learn-guides-asset-conversion.md",sourceDirName:"learn",slug:"/learn-guides-asset-conversion",permalink:"/docs/learn-guides-asset-conversion",draft:!1,editUrl:"https://github.com/w3f/polkadot-wiki/edit/master/docs/learn/learn-guides-asset-conversion.md",tags:[],version:"current",lastUpdatedBy:"Filippo",lastUpdatedAt:1714545713,formattedLastUpdatedAt:"May 1, 2024",frontMatter:{id:"learn-guides-asset-conversion",title:"Asset Conversion Tutorials",sidebar_label:"Asset Conversion Tutorials",description:"Asset Conversion implementation details on AssetHub.",keywords:["Assets","DEX","Exchange","Pools","Tokens"],slug:"../learn-guides-asset-conversion"},sidebar:"docs",previous:{title:"Create Asset Guides",permalink:"/docs/learn-guides-assets-create"},next:{title:"Bridge Hub Guides",permalink:"/docs/learn-guides-bridges"}},u={},c=[{value:"Create a Liquidity Pool",id:"create-a-liquidity-pool",level:2},{value:"Liquidity Provision",id:"liquidity-provision",level:2},{value:"Swap Assets",id:"swap-assets",level:2},{value:"Swap from an exact amount of Tokens",id:"swap-from-an-exact-amount-of-tokens",level:3},{value:"Swap to an exact amount of Tokens",id:"swap-to-an-exact-amount-of-tokens",level:3},{value:"Withdraw Provided Liquidity",id:"withdraw-provided-liquidity",level:2}],m={toc:c},h="wrapper";function g(e){var t=e.components,l=(0,a.A)(e,r);return(0,i.yg)(h,(0,o.A)({},m,l,{components:t,mdxType:"MDXLayout"}),(0,i.yg)(s.A,{message:"Polkadot-JS is for developers and power users only. If you need help using the\n[Polkadot-JS UI](/docs/polkadotjs-ui), you can contact the\n[Polkadot Support Team](https://support.polkadot.network/support/home). For more user-friendly tools\nsee the [wallets](./wallets-index), [apps](./apps-index) and [dashboard](./dashboards-index) pages.",mdxType:"MessageBox"}),(0,i.yg)("admonition",{title:"Wallet and UI Developers",type:"info"},(0,i.yg)("p",{parentName:"admonition"},"The ",(0,i.yg)("a",{parentName:"p",href:"https://github.com/MVPWorkshop/dot-acp-ui"},"DOT ACP UI")," project is part of Polkadot initiative\nfor building front-end and UI for Asset Conversion Pallet on Polkadot's Asset Hub. Currently, the\napp is deployed on Westend, Rococo and Kusama ",(0,i.yg)("a",{parentName:"p",href:"https://app.dotacp.mvpworkshop.co/swap"},"here"),".")),(0,i.yg)("p",null,"The tutorial below demonstrates the complete journey from creating a liquidity pool on Rococo test\nnet and exploring all of the key functionalities of Asset Conversion pallet."),(0,i.yg)("h2",{id:"create-a-liquidity-pool"},"Create a Liquidity Pool"),(0,i.yg)("p",null,"If there is no existing liquidity pool for an asset on Asset Hub, the first step is to create a\nliquidity pool. If you are looking for a guide on how to create an asset on Asset Hub, it is\navailable ",(0,i.yg)("a",{parentName:"p",href:"/docs/learn-guides-assets-create"},"here.")),(0,i.yg)("p",null,"The ",(0,i.yg)("inlineCode",{parentName:"p"},"create_pool")," function is used to create an empty liquidity pool along with a new ",(0,i.yg)("inlineCode",{parentName:"p"},"lp_token"),"\nasset. This asset's ID is announced in the ",(0,i.yg)("inlineCode",{parentName:"p"},"Event::PoolCreated")," event. After creating a pool,\nliquidity can be added to it via the ",(0,i.yg)("inlineCode",{parentName:"p"},"Pallet::add_liquidity")," function."),(0,i.yg)("p",null,"For example, the snapshot below shows how to create liquidity pool with ",(0,i.yg)("inlineCode",{parentName:"p"},"ROC")," tokens and ",(0,i.yg)("inlineCode",{parentName:"p"},"EDU"),"\ntokens with the asset ID ",(0,i.yg)("inlineCode",{parentName:"p"},"149")," on Rococo Asset Hub. Creating this extrinsic requires knowledge of\n",(0,i.yg)("a",{parentName:"p",href:"/docs/learn/xcm/fundamentals/multilocation-summary"},"XCM Multilocations"),". From the perspective of AssetHub,\nan Asset Hub, the asset with an ",(0,i.yg)("inlineCode",{parentName:"p"},"AssetId")," of ",(0,i.yg)("inlineCode",{parentName:"p"},"149")," has a MultiLocation of"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre"},"{\n   parents: 0,\n   interior: {\n     X2: [{PalletInstance: 50}, {GeneralIndex: 149}]\n   }\n}\n")),(0,i.yg)("p",null,"The PalletInstance of ",(0,i.yg)("inlineCode",{parentName:"p"},"50")," represents the Assets pallet on Asset Hub and the ",(0,i.yg)("inlineCode",{parentName:"p"},"GeneralIndex")," is the\n",(0,i.yg)("inlineCode",{parentName:"p"},"AssetId")," of the asset."),(0,i.yg)("p",null,(0,i.yg)("img",{alt:"Create Liquidity Pool",src:n(67780).A,width:"2870",height:"2186"})),(0,i.yg)("p",null,"The ",(0,i.yg)("inlineCode",{parentName:"p"},"lp_token")," ID created for this pool is ",(0,i.yg)("inlineCode",{parentName:"p"},"24"),", and\n",(0,i.yg)("a",{parentName:"p",href:"https://assethub-rococo.subscan.io/extrinsic/4604922-2?event=4604922-8"},"here")," is the event for\nreference."),(0,i.yg)("h2",{id:"liquidity-provision"},"Liquidity Provision"),(0,i.yg)("p",null,"The ",(0,i.yg)("inlineCode",{parentName:"p"},"add_liquidity")," function allows users to provide liquidity to a pool composed of two assets. It\nrequires specifying the desired amounts for both assets and minimum acceptable amounts. The function\ncalculates an optimal contribution of assets, which may differ from the desired amounts but will not\nbe less than the specified minimums. Liquidity providers receive liquidity tokens representing their\nshare of the pool."),(0,i.yg)("p",null,"For example, the snapshot below shows how to provide liquidity to the pool with ",(0,i.yg)("inlineCode",{parentName:"p"},"ROC")," tokens and\n",(0,i.yg)("inlineCode",{parentName:"p"},"EDU")," tokens with the asset ID ",(0,i.yg)("inlineCode",{parentName:"p"},"149")," on Rococo Asset Hub. The intention is to provide liquidity of 1\n",(0,i.yg)("inlineCode",{parentName:"p"},"ROC")," token (",(0,i.yg)("inlineCode",{parentName:"p"},"u128")," value of ",(0,i.yg)("inlineCode",{parentName:"p"},"1000000000000")," as it has 12 decimals) and 100 ",(0,i.yg)("inlineCode",{parentName:"p"},"EDU")," tokens (",(0,i.yg)("inlineCode",{parentName:"p"},"u128"),"\nvalue of ",(0,i.yg)("inlineCode",{parentName:"p"},"1000000000000")," as it has 10 decimals)."),(0,i.yg)("p",null,(0,i.yg)("img",{alt:"Provide Liquidity",src:n(17097).A,width:"2860",height:"2992"})),(0,i.yg)("p",null,"After successful submission of the extrinsic above, LP tokens are minted to the specified account.\nBelow is the snapshot of the liquidity pool on the\n",(0,i.yg)("a",{parentName:"p",href:"https://github.com/MVPWorkshop/dot-acp-ui"},"DOT ACP UI.")),(0,i.yg)("p",null,(0,i.yg)("img",{alt:"Liquidity Pool Example",src:n(76705).A,width:"2595",height:"1296"})),(0,i.yg)("h2",{id:"swap-assets"},"Swap Assets"),(0,i.yg)("h3",{id:"swap-from-an-exact-amount-of-tokens"},"Swap from an exact amount of Tokens"),(0,i.yg)("p",null,"The ",(0,i.yg)("inlineCode",{parentName:"p"},"swap_exact_tokens_for_tokens")," function allows users to swap a precise amount of one asset for\nanother within a specified liquidity pool, ensuring the user receives at least a minimum expected\namount of the second asset in return. This function aims to provide predictability in trading\noutcomes, allowing users to manage their asset exchanges with confidence regarding the minimum\nreturn."),(0,i.yg)("p",null,"For example, the snapshot below shows how to swap ",(0,i.yg)("inlineCode",{parentName:"p"},"ROC")," tokens to ",(0,i.yg)("inlineCode",{parentName:"p"},"EDU")," tokens with the asset ID\n",(0,i.yg)("inlineCode",{parentName:"p"},"149")," on Rococo Asset Hub. The intention is to swap 0.1 ",(0,i.yg)("inlineCode",{parentName:"p"},"ROC")," tokens (",(0,i.yg)("inlineCode",{parentName:"p"},"u128")," value of ",(0,i.yg)("inlineCode",{parentName:"p"},"100000000000"),"\nas it has 12 decimals) to at least 9 ",(0,i.yg)("inlineCode",{parentName:"p"},"EDU")," tokens (",(0,i.yg)("inlineCode",{parentName:"p"},"u128")," value of ",(0,i.yg)("inlineCode",{parentName:"p"},"90000000000")," as it has 10\ndecimals)."),(0,i.yg)("p",null,(0,i.yg)("img",{alt:"Swap Exact Amount",src:n(38224).A,width:"2844",height:"3016"})),(0,i.yg)("p",null,"Below is the snapshot of the liquidity pool on the\n",(0,i.yg)("a",{parentName:"p",href:"https://github.com/MVPWorkshop/dot-acp-ui"},"DOT ACP UI.")," after successful submission of the\nextrinsic above. It can be observed that the pool now has 1.1 ",(0,i.yg)("inlineCode",{parentName:"p"},"ROC")," tokens and around 9.06 ",(0,i.yg)("inlineCode",{parentName:"p"},"EDU"),"\ntokens are transferred out of it."),(0,i.yg)("p",null,(0,i.yg)("img",{alt:"Swap Exact Amount Example",src:n(3412).A,width:"2746",height:"1140"})),(0,i.yg)("h3",{id:"swap-to-an-exact-amount-of-tokens"},"Swap to an exact amount of Tokens"),(0,i.yg)("p",null,"On the other hand, the ",(0,i.yg)("inlineCode",{parentName:"p"},"swap_tokens_for_exact_tokens")," function allows users to trade a flexible\namount of one asset to precisely obtain a specified amount of another asset. It ensures that users\ndo not spend more than a predetermined maximum amount of the initial asset to acquire the exact\ntarget amount of the second asset, providing a way to control the cost of the transaction while\nachieving the desired outcome."),(0,i.yg)("p",null,"For example, the snapshot below shows how to swap ",(0,i.yg)("inlineCode",{parentName:"p"},"EDU")," tokens with the asset ID ",(0,i.yg)("inlineCode",{parentName:"p"},"149")," on Rococo\nAsset Hub to ",(0,i.yg)("inlineCode",{parentName:"p"},"ROC")," Tokens. The intention is to swap for obtaining 0.1 ",(0,i.yg)("inlineCode",{parentName:"p"},"ROC")," tokens (",(0,i.yg)("inlineCode",{parentName:"p"},"u128")," value of\n",(0,i.yg)("inlineCode",{parentName:"p"},"100000000000")," as it has 12 decimals) for a maximum of 10 ",(0,i.yg)("inlineCode",{parentName:"p"},"EDU")," tokens (",(0,i.yg)("inlineCode",{parentName:"p"},"u128")," value of\n",(0,i.yg)("inlineCode",{parentName:"p"},"100000000000")," as it has 10 decimals)."),(0,i.yg)("p",null,(0,i.yg)("img",{alt:"Swap Exact Amount",src:n(48109).A,width:"2860",height:"3006"})),(0,i.yg)("p",null,"Below is the snapshot of the liquidity pool on the\n",(0,i.yg)("a",{parentName:"p",href:"https://github.com/MVPWorkshop/dot-acp-ui"},"DOT ACP UI.")," after successful submission of the\nextrinsic above."),(0,i.yg)("p",null,(0,i.yg)("img",{alt:"Swap to Exact Amount Example",src:n(82545).A,width:"2627",height:"1294"})),(0,i.yg)("h2",{id:"withdraw-provided-liquidity"},"Withdraw Provided Liquidity"),(0,i.yg)("p",null,"The ",(0,i.yg)("inlineCode",{parentName:"p"},"remove_liquidity")," function allows users to withdraw their provided liquidity from a pool,\nreceiving back the original assets. When calling this function, users specify the amount of\nliquidity tokens (representing their share in the pool) they wish to burn. They also set minimum\nacceptable amounts for the assets they expect to receive back. This mechanism ensures users can\ncontrol the minimum value they receive, protecting against unfavourable price movements during the\nwithdrawal process\u200b."),(0,i.yg)("p",null,"For example, the snapshot below shows how to remove liquidity by specifying the number of LP tokens.\nIn exchange of removing around half of the liquidity of the pool, the expecation is that we receive\nat least 0.4 ",(0,i.yg)("inlineCode",{parentName:"p"},"ROC")," tokens (",(0,i.yg)("inlineCode",{parentName:"p"},"u128")," value of",(0,i.yg)("inlineCode",{parentName:"p"},"400000000000")," as it has 12 decimals) and 40 ",(0,i.yg)("inlineCode",{parentName:"p"},"EDU")," tokens\n(",(0,i.yg)("inlineCode",{parentName:"p"},"u128")," value of ",(0,i.yg)("inlineCode",{parentName:"p"},"400000000000")," as it has 10 decimals)."),(0,i.yg)("p",null,(0,i.yg)("img",{alt:"Remove Liquidity",src:n(37340).A,width:"2832",height:"2870"})),(0,i.yg)("p",null,"Below is the snapshot of the liquidity pool on the\n",(0,i.yg)("a",{parentName:"p",href:"https://github.com/MVPWorkshop/dot-acp-ui"},"DOT ACP UI.")," after successful submission of the\nextrinsic above."),(0,i.yg)("p",null,(0,i.yg)("img",{alt:"Remove Liquidity Example",src:n(43745).A,width:"2585",height:"1309"})))}g.isMDXComponent=!0},17097:(e,t,n)=>{n.d(t,{A:()=>o});const o=n.p+"assets/images/Asset-Conversion-Add-Liquidity-e880d907645db19dc0ee4b8b9fdb9ad3.png"},67780:(e,t,n)=>{n.d(t,{A:()=>o});const o=n.p+"assets/images/Asset-Conversion-Create-Pool-8945e1790f183ac14a4f1185763ea5a0.png"},76705:(e,t,n)=>{n.d(t,{A:()=>o});const o=n.p+"assets/images/Asset-Conversion-Liquidity-Pool-Example-ae441ec1a55827fd488ecef3b8510681.png"},43745:(e,t,n)=>{n.d(t,{A:()=>o});const o=n.p+"assets/images/Asset-Conversion-Remove-Liquidity-Example-bfdc3a0b327bd592c2abcf4cfb9b1755.png"},37340:(e,t,n)=>{n.d(t,{A:()=>o});const o=n.p+"assets/images/Asset-Conversion-Remove-Liquidity-7fc348a12802b40bf643683bd14c5a3b.png"},38224:(e,t,n)=>{n.d(t,{A:()=>o});const o=n.p+"assets/images/Asset-Conversion-Swap-Exact-Token-a56d6a02ba2bf1a2620bc7f3955aa658.png"},3412:(e,t,n)=>{n.d(t,{A:()=>o});const o=n.p+"assets/images/Asset-Conversion-Swap-Exact-Tokens-Example-60790c60e4a0315e59834c0c5421b0f9.png"},82545:(e,t,n)=>{n.d(t,{A:()=>o});const o=n.p+"assets/images/Asset-Conversion-Swap-To-Exact-Example-9be51ed786d418f553b1eeb0ae866cb0.png"},48109:(e,t,n)=>{n.d(t,{A:()=>o});const o=n.p+"assets/images/Asset-Conversion-Swap-To-Exact-Tokens-ae5e1b66b2a80208b329a48af5ab8472.png"}}]);