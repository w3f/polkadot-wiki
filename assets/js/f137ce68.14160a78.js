"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9188],{33369:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>x,frontMatter:()=>c,metadata:()=>o,toc:()=>u});var i=r(74848),t=r(28453),s=r(11470),l=r(19365);const c={id:"learn-xcm-instructions",title:"XCM Instructions & Register Specification",sidebar_label:"XCM Instructions",description:"Specification for Instructions and Registers for the XCM Format.",keywords:["cross-consensus","XCM","XCMP","interoperability","communication"],slug:"../learn-xcm-instructions"},a=void 0,o={id:"learn/learn-xcm-instructions",title:"XCM Instructions & Register Specification",description:"Specification for Instructions and Registers for the XCM Format.",source:"@site/../docs/learn/learn-xcm-instructions.md",sourceDirName:"learn",slug:"/learn-xcm-instructions",permalink:"/docs/learn-xcm-instructions",draft:!1,unlisted:!1,editUrl:"https://github.com/w3f/polkadot-wiki/edit/master/docs/learn/learn-xcm-instructions.md",tags:[],version:"current",lastUpdatedBy:"Filippo",lastUpdatedAt:1727178265e3,frontMatter:{id:"learn-xcm-instructions",title:"XCM Instructions & Register Specification",sidebar_label:"XCM Instructions",description:"Specification for Instructions and Registers for the XCM Format.",keywords:["cross-consensus","XCM","XCMP","interoperability","communication"],slug:"../learn-xcm-instructions"},sidebar:"docs",previous:{title:"XCM Virtual Machine (XCVM)",permalink:"/docs/learn-xcvm"},next:{title:"Accounts",permalink:"/docs/learn-account-advanced"}},d={},u=[{value:"XCVM Registers",id:"xcvm-registers",level:2},{value:"XCVM Instruction Set",id:"xcvm-instruction-set",level:2},{value:"Instructions Application Example",id:"instructions-application-example",level:2}];function h(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",li:"li",p:"p",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.admonition,{title:"XCM Documentation",type:"info",children:(0,i.jsxs)(n.p,{children:["For a more practical approach to utilizing XCM, refer to the ",(0,i.jsx)(n.a,{href:"./learn/xcm",children:"XCM Docs"}),". Please keep in\nmind that XCM is under active development."]})}),"\n",(0,i.jsxs)(n.p,{children:["This page can also be viewed at the ",(0,i.jsx)(n.a,{href:"https://github.com/paritytech/xcm-format",children:(0,i.jsx)(n.code,{children:"xcm-format"})}),"\nrepository, where each instruction and register is explained in-depth."]}),"\n",(0,i.jsx)(n.h2,{id:"xcvm-registers",children:"XCVM Registers"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.em,{children:"Programme"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.em,{children:"Programme Counter"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.em,{children:"Error"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.em,{children:"Error Handler"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.em,{children:"Appendix"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.em,{children:"Origin"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.em,{children:"Holding"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.em,{children:"Surplus Weight"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.em,{children:"Refunded Weight"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.em,{children:"Transact Status"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.em,{children:"Topic"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.em,{children:"Transact Status Register"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.em,{children:"Topic Register"})}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"xcvm-instruction-set",children:"XCVM Instruction Set"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"WithdrawAsset"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"ReserveAssetDeposited"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"ReceiveTeleportedAsset"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"QueryResponse"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"TransferAsset"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"TransferReserveAsset"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"Transact"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"HrmpNewChannelOpenRequest"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"HrmpChannelAccepted"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"HrmpChannelClosing"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"ClearOrigin"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"DescendOrigin"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"ReportError"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"DepositAsset"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"DepositReserveAsset"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"ExchangeAsset"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"InitiateReserveWithdraw"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"InitiateTeleport"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"QueryHolding"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"BuyExecution"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"RefundSurplus"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"SetErrorHandler"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"SetAppendix"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"ClearError"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"ClaimAsset"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"Trap"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"SubscribeVersion"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"UnsubscribeVersion"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"BurnAsset"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"ExpectAsset"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"ExpectError"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"ExpectOrigin"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"QueryPallet"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"ExpectPallet"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"ReportTransactStatus"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"ClearTransactStatus"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"LockAsset"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"UnlockAsset"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"NoteUnlockable"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"RequestUnlock"})}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"instructions-application-example",children:"Instructions Application Example"}),"\n",(0,i.jsxs)(n.p,{children:["The following presents the practical mapping of instructions to some\n",(0,i.jsx)(n.a,{href:"./learn-xcm.md/#core-functionality-of-xcm",children:"core functionality in XCM"}),"."]}),"\n",(0,i.jsxs)(s.A,{groupId:"operating-systems",values:[{label:"Programmability",value:"program"},{label:"Functional Multichain Decomposition",value:"fmd"}],children:[(0,i.jsxs)(l.A,{value:"program",children:[(0,i.jsx)(n.p,{children:"These are the primary instructions that enable programmability and branching to be possible.\nBranching in this context is the ability for errors and logic to be handled as needed when dealing\nwith a message."}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.a,{href:"https://github.com/paritytech/xcm-format/tree/master#expectassetmultiassets",children:(0,i.jsx)(n.code,{children:"ExpectAsset(MultiAssets)"})})," -\nChecks if the Holding register has a specific amount of assets, throws an error if it doesn't."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.a,{href:"https://github.com/paritytech/xcm-format/tree/master#expecterroroptionu32-error",children:(0,i.jsx)(n.code,{children:"ExpectError(Option<(u32, Error)>)"})})," -\nEnsures the Error register contains the given error, and throws an error if it doesn't."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.a,{href:"https://github.com/paritytech/xcm-format/tree/master#expectoriginmultilocation",children:(0,i.jsx)(n.code,{children:"ExpectOrigin(MultiLocation)"})})," -\nEnsures the Origin register contains the expected origin, and throws an error if it doesn't."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"QueryPallet"})," - Queries the existence of a particular pallet type."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"ExpectPallet"})," - Ensure that a particular pallet with a particular version exists."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"ReportTransactStatus(QueryResponseInfo)"})," - Send a ",(0,i.jsx)(n.code,{children:"QueryResponse"})," message containing the value of\nthe Transact Status Register to some destination."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"ClearTransactStatus"})," - Set the Transact Status Register to its default, cleared, value."]}),"\n"]}),"\n"]})]}),(0,i.jsxs)(l.A,{value:"fmd",children:[(0,i.jsx)(n.p,{children:"These instructions highlight the key instructions focused on Functional Multichain Decomposition."}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"LockAsset(MultiAsset, MultiLocation)"})," - Lock the locally held asset and prevent further transfer\nor withdrawal."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"UnlockAsset(MultiAsset, MultiLocation)"})," - Remove the lock over ",(0,i.jsx)(n.code,{children:"asset"})," on this chain and (if\nnothing else is preventing it) allow the asset to be transferred."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"NoteUnlockable(MultiAsset, MultiLocation)"})," - Asset (",(0,i.jsx)(n.code,{children:"asset"}),") has been locked on the ",(0,i.jsx)(n.code,{children:"origin"}),"\nsystem and may not be transferred. It may only be unlocked with the receipt of the ",(0,i.jsx)(n.code,{children:"UnlockAsset"}),"\ninstruction from this chain."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"RequestUnlock(MultiAsset, MultiLocation)"})," - Send an ",(0,i.jsx)(n.code,{children:"UnlockAsset"})," instruction to the ",(0,i.jsx)(n.code,{children:"locker"})," for\nthe given ",(0,i.jsx)(n.code,{children:"asset"}),"."]}),"\n"]}),"\n"]})]})]})]})}function x(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},19365:(e,n,r)=>{r.d(n,{A:()=>l});r(96540);var i=r(34164);const t={tabItem:"tabItem_Ymn6"};var s=r(74848);function l(e){var n=e.children,r=e.hidden,l=e.className;return(0,s.jsx)("div",{role:"tabpanel",className:(0,i.A)(t.tabItem,l),hidden:r,children:n})}},11470:(e,n,r)=>{r.d(n,{A:()=>A});var i=r(96540),t=r(34164),s=r(23104),l=r(56347),c=r(205),a=r(57485),o=r(31682),d=r(75376);function u(e){var n,r;return null!=(n=null==(r=i.Children.toArray(e).filter((function(e){return"\n"!==e})).map((function(e){if(!e||(0,i.isValidElement)(e)&&((n=e.props)&&"object"==typeof n&&"value"in n))return e;var n;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})))?void 0:r.filter(Boolean))?n:[]}function h(e){var n=e.values,r=e.children;return(0,i.useMemo)((function(){var e=null!=n?n:function(e){return u(e).map((function(e){var n=e.props;return{value:n.value,label:n.label,attributes:n.attributes,default:n.default}}))}(r);return function(e){var n=(0,o.XI)(e,(function(e,n){return e.value===n.value}));if(n.length>0)throw new Error('Docusaurus error: Duplicate values "'+n.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.')}(e),e}),[n,r])}function x(e){var n=e.value;return e.tabValues.some((function(e){return e.value===n}))}function p(e){var n=e.queryString,r=void 0!==n&&n,t=e.groupId,s=(0,l.W6)(),c=function(e){var n=e.queryString,r=void 0!==n&&n,i=e.groupId;if("string"==typeof r)return r;if(!1===r)return null;if(!0===r&&!i)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return null!=i?i:null}({queryString:r,groupId:t});return[(0,a.aZ)(c),(0,i.useCallback)((function(e){if(c){var n=new URLSearchParams(s.location.search);n.set(c,e),s.replace(Object.assign({},s.location,{search:n.toString()}))}}),[c,s])]}function j(e){var n,r,t,s,l=e.defaultValue,a=e.queryString,o=void 0!==a&&a,u=e.groupId,j=h(e),m=(0,i.useState)((function(){return function(e){var n,r=e.defaultValue,i=e.tabValues;if(0===i.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(r){if(!x({value:r,tabValues:i}))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+r+'" but none of its children has the corresponding value. Available values are: '+i.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");return r}var t=null!=(n=i.find((function(e){return e.default})))?n:i[0];if(!t)throw new Error("Unexpected error: 0 tabValues");return t.value}({defaultValue:l,tabValues:j})})),f=m[0],v=m[1],g=p({queryString:o,groupId:u}),b=g[0],y=g[1],A=(n=function(e){return e?"docusaurus.tab."+e:null}({groupId:u}.groupId),r=(0,d.Dv)(n),t=r[0],s=r[1],[t,(0,i.useCallback)((function(e){n&&s.set(e)}),[n,s])]),C=A[0],w=A[1],k=function(){var e=null!=b?b:C;return x({value:e,tabValues:j})?e:null}();return(0,c.A)((function(){k&&v(k)}),[k]),{selectedValue:f,selectValue:(0,i.useCallback)((function(e){if(!x({value:e,tabValues:j}))throw new Error("Can't select invalid tab value="+e);v(e),y(e),w(e)}),[y,w,j]),tabValues:j}}var m=r(92303);const f={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var v=r(74848);function g(e){var n=e.className,r=e.block,i=e.selectedValue,l=e.selectValue,c=e.tabValues,a=[],o=(0,s.a_)().blockElementScrollPositionUntilNextRender,d=function(e){var n=e.currentTarget,r=a.indexOf(n),t=c[r].value;t!==i&&(o(n),l(t))},u=function(e){var n,r=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":var i,t=a.indexOf(e.currentTarget)+1;r=null!=(i=a[t])?i:a[0];break;case"ArrowLeft":var s,l=a.indexOf(e.currentTarget)-1;r=null!=(s=a[l])?s:a[a.length-1]}null==(n=r)||n.focus()};return(0,v.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,t.A)("tabs",{"tabs--block":r},n),children:c.map((function(e){var n=e.value,r=e.label,s=e.attributes;return(0,v.jsx)("li",Object.assign({role:"tab",tabIndex:i===n?0:-1,"aria-selected":i===n,ref:function(e){return a.push(e)},onKeyDown:u,onClick:d},s,{className:(0,t.A)("tabs__item",f.tabItem,null==s?void 0:s.className,{"tabs__item--active":i===n}),children:null!=r?r:n}),n)}))})}function b(e){var n=e.lazy,r=e.children,s=e.selectedValue,l=(Array.isArray(r)?r:[r]).filter(Boolean);if(n){var c=l.find((function(e){return e.props.value===s}));return c?(0,i.cloneElement)(c,{className:(0,t.A)("margin-top--md",c.props.className)}):null}return(0,v.jsx)("div",{className:"margin-top--md",children:l.map((function(e,n){return(0,i.cloneElement)(e,{key:n,hidden:e.props.value!==s})}))})}function y(e){var n=j(e);return(0,v.jsxs)("div",{className:(0,t.A)("tabs-container",f.tabList),children:[(0,v.jsx)(g,Object.assign({},n,e)),(0,v.jsx)(b,Object.assign({},n,e))]})}function A(e){var n=(0,m.A)();return(0,v.jsx)(y,Object.assign({},e,{children:u(e.children)}),String(n))}},28453:(e,n,r)=>{r.d(n,{R:()=>l,x:()=>c});var i=r(96540);const t={},s=i.createContext(t);function l(e){const n=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);